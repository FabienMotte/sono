<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Sono - Examples - Basic audio player</title>
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <h1>Basic audio player</h1>

    <h3>Player A</h3>
    <div data-js="playerA"></div>

    <h3>Player B</h3>
    <div data-js="playerB"></div>

    <h3>Master volume</h3>
    <div><input data-js="master-volume" type="range" min="0" max="1" step="0.01" value="1" /><div>

    <script>
        // Test with no WebAudio
        if(window.location.search.substring(1) === 'nowebaudio') {
            window.AudioContext = window.webkitAudioContext = undefined;
        }
    </script>
    <script src="../dist/sono.js"></script>
    <script src="js/player.js"></script>
    <script>
        (function() {
            'use strict';

            Sono.log();

            var soundA = Sono.createSound(['audio/TEST.ogg', 'audio/TEST.mp3']);
            new Player(soundA, document.querySelector('[data-js="playerA"]'));

            var soundB = Sono.createSound(['audio/DRUMS.ogg', 'audio/DRUMS.mp3']);
            new Player(soundB, document.querySelector('[data-js="playerB"]'));

            var masterVolume = document.querySelector('[data-js="master-volume"]');
            masterVolume.addEventListener('change', function() {
                Sono.volume = this.value;
            });
            var end = function() {
                console.log('1 ended');
                soundA.off('ended', end);
                soundA.on('ended', function() {
                    soundA.removeAllListeners();
                });
            };
            soundA.on('ended', end);

            soundA.on('ended', function() {
                console.log('2 ended');
            });

            soundA.loader.on('complete', function(data) {
                console.log('complete', soundA.data);
            });

        }());
    </script>
</body>
</html>
