<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>sono - Examples - Basic audio player</title>
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <h1>Basic audio player</h1>

    <section>

        <h3>Player A</h3>
        <div data-js="playerA"></div>

        <h3>Player B</h3>
        <div data-js="playerB"></div>

        <h3>Master volume</h3>
        <div><input data-js="master-volume" type="range" min="0" max="1" step="0.01" value="1" /><div>

    </section>

    <script>
        // Test with no WebAudio
        if(window.location.search.slice(1) === 'nowebaudio') {
            window.AudioContext = window.webkitAudioContext = undefined;
        }
    </script>
    <script src="../dist/sono.js"></script>
    <script src="js/player.js"></script>
    <script>
        (function() {
            'use strict';

            sono.log();

            var soundA = sono.createSound(['audio/music.ogg', 'audio/music.mp3']);
            new Player(soundA, document.querySelector('[data-js="playerA"]'));

            var soundB = sono.createSound(['audio/hit.ogg', 'audio/hit.mp3']);
            new Player(soundB, document.querySelector('[data-js="playerB"]'));

            var masterVolume = document.querySelector('[data-js="master-volume"]');
            masterVolume.addEventListener('change', function() {
                sono.volume = this.value;
            });
            var end = function() {
                soundA.off('ended', end);
                soundA.on('ended', function() {
                    soundA.off('ended');
                });
            };
            soundA.on('ended', end);

        }());
    </script>
</body>
</html>
