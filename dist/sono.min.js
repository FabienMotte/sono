!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Sono=t()}}(function(){var t;return function e(t,o,i){function n(r,u){if(!o[r]){if(!t[r]){var c="function"==typeof require&&require;if(!u&&c)return c(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var h=o[r]={exports:{}};t[r][0].call(h.exports,function(e){var o=t[r][1][e];return n(o?o:e)},h,h.exports,e,t,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e,o){!function(e){function i(t,e,o,i,n){this._listener=e,this._isOnce=o,this.context=i,this._signal=t,this._priority=n||0}function n(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function s(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){s.prototype.dispatch.apply(t,arguments)}}i.prototype={active:!0,params:null,execute:function(t){var e,o;return this.active&&this._listener&&(o=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,o),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,o,n){var s,r=this._indexOfListener(t,o);if(-1!==r){if(s=this._bindings[r],s.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else s=new i(this,t,e,o,n),this._addBinding(s);return this.memorize&&this._prevParams&&s.execute(this._prevParams),s},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var o,i=this._bindings.length;i--;)if(o=this._bindings[i],o._listener===t&&o.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,o){return n(t,"add"),this._registerListener(t,!1,e,o)},addOnce:function(t,e,o){return n(t,"addOnce"),this._registerListener(t,!0,e,o)},remove:function(t,e){n(t,"remove");var o=this._indexOfListener(t,e);return-1!==o&&(this._bindings[o]._destroy(),this._bindings.splice(o,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),o=this._bindings.length;if(this.memorize&&(this._prevParams=e),o){t=this._bindings.slice(),this._shouldPropagate=!0;do o--;while(t[o]&&this._shouldPropagate&&t[o].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var r=s;r.Signal=s,"function"==typeof t&&t.amd?t(function(){return r}):"undefined"!=typeof o&&o.exports?o.exports=r:e.signals=r}(this)},{}],2:[function(t,e){"use strict";function o(t,e){this.add(t),this.id="",this._context=e,this._endedCallback=null,this._loop=!1,this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0}o.prototype.add=function(t){return this._buffer=t,this._buffer},o.prototype.play=function(t,e){void 0===t&&(t=0),t>0&&(t=this._context.currentTime+t),void 0===e&&(e=0),this._pausedAt>0&&(e+=this._pausedAt),this.sourceNode.loop=this._loop,this.sourceNode.onended=this._endedHandler.bind(this),this.sourceNode.start(t,e),this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime-e,this._pausedAt=0,this._playing=!0,this._paused=!1},o.prototype.pause=function(){var t=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=t,this._playing=!1,this._paused=!0},o.prototype.stop=function(){if(this._sourceNode){this._sourceNode.onended=null;try{this._sourceNode.stop(0)}catch(t){}this._sourceNode=null}this._startedAt=0,this._pausedAt=0,this._playing=!1,this._paused=!1},o.prototype.onEnded=function(t,e){this._endedCallback=t?t.bind(e||this):null},o.prototype._endedHandler=function(){this.stop(),"function"==typeof this._endedCallback&&this._endedCallback(this)},Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}}),Object.defineProperty(o.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(o.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=!!t}}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._paused}}),Object.defineProperty(o.prototype,"playing",{get:function(){return this._playing}}),Object.defineProperty(o.prototype,"progress",{get:function(){return Math.min(this.currentTime/this.duration,1)}}),Object.defineProperty(o.prototype,"sourceNode",{get:function(){return this._sourceNode||(this._sourceNode=this._context.createBufferSource(),this._sourceNode.buffer=this._buffer),this._sourceNode}}),"object"==typeof e&&e.exports&&(e.exports=o)},{}],3:[function(t,e){"use strict";function o(){this.onChildComplete=new i.Signal,this.onComplete=new i.Signal,this.onProgress=new i.Signal,this.onError=new i.Signal,this.crossOrigin=!1,this.loaded=!1,this.loaders={},this.loading=!1,this.numLoaded=0,this.numTotal=0,this.queue=[],this.touchLocked=!1,this.webAudioContext=null}var i=t("signals");o.prototype.add=function(t){var e=new o.File(t);return e.webAudioContext=this.webAudioContext,e.crossOrigin=this.crossOrigin,e.touchLocked=this.touchLocked,this.queue.push(e),this.loaders[e.url]=e,this.numTotal++,e},o.prototype.start=function(){this.numTotal=this.queue.length,this.loading||(this.loading=!0,this.next())},o.prototype.next=function(){if(0===this.queue.length)return this.loaded=!0,this.loading=!1,void this.onComplete.dispatch(this.loaders);var t=this.queue.pop(),e=this,o=function(t){var o=e.numLoaded+t;e.onProgress.getNumListeners()>0&&e.onProgress.dispatch(o/e.numTotal)};t.onProgress.add(o);var i=function(){t.onProgress.remove(o),e.numLoaded++,e.onProgress.getNumListeners()>0&&e.onProgress.dispatch(e.numLoaded/e.numTotal),e.onChildComplete.dispatch(t),e.next()};t.onBeforeComplete.addOnce(i);var n=function(){e.onError.dispatch(t),e.next()};t.onError.addOnce(n),t.start()},o.File=function(t){this.url=t,this.onProgress=new i.Signal,this.onBeforeComplete=new i.Signal,this.onComplete=new i.Signal,this.onError=new i.Signal,this.webAudioContext=null,this.crossOrigin=!1,this.touchLocked=!1,this.progress=0},o.File.prototype.start=function(){this.webAudioContext?this.loadArrayBuffer(this.webAudioContext):this.loadAudioElement(this.touchLocked)},o.File.prototype.loadArrayBuffer=function(t){var e=new XMLHttpRequest;e.open("GET",this.url,!0),e.responseType="arraybuffer";var o=this;e.onprogress=function(t){t.lengthComputable&&(o.progress=t.loaded/t.total,o.onProgress.dispatch(o.progress))},e.onload=function(){t.decodeAudioData(e.response,function(t){o.data=t,o.progress=1,o.onProgress.dispatch(1),o.onBeforeComplete.dispatch(t),o.onComplete.dispatch(t)},function(){o.onError.dispatch()})},e.onerror=function(t){o.onError.dispatch(t)},e.send(),this.request=e},o.File.prototype.loadAudioElement=function(t){var e=new Audio;this.data=e,e.name=this.url,e.preload="auto";var o=this;if(e.src=this.url,t)this.onProgress.dispatch(1),this.onComplete.dispatch(this.data);else{var i=function(){e.removeEventListener("canplaythrough",i),clearTimeout(n),o.progress=1,o.onProgress.dispatch(1),o.onBeforeComplete.dispatch(o.data),o.onComplete.dispatch(o.data)},n=setTimeout(i,2e3);e.addEventListener("canplaythrough",i,!1),e.onerror=function(){clearTimeout(n),o.onError.dispatch()},e.load()}},o.File.prototype.cancel=function(){this.request&&4!==this.request.readyState&&this.request.abort()},e.exports=o},{signals:1}],4:[function(t,e){"use strict";function o(t,e){this.add(t),this.id="",this._context=e,this._endedCallback=null,this._endedHandlerBound=this._endedHandler.bind(this),this._loop=!1,this._paused=!1,this._playing=!1,this._sourceNode=null}o.prototype.add=function(t){return this._el=t,this._el},o.prototype.play=function(t,e){clearTimeout(this._delayTimeout),this.volume=this._volume,e&&(this._el.currentTime=e),t?this._delayTimeout=setTimeout(this.play.bind(this),t):this._el.play(),this._playing=!0,this._paused=!1,this._el.removeEventListener("ended",this._endedHandlerBound),this._el.addEventListener("ended",this._endedHandlerBound,!1)},o.prototype.pause=function(){clearTimeout(this._delayTimeout),this._el&&(this._el.pause(),this._playing=!1,this._paused=!0)},o.prototype.stop=function(){if(clearTimeout(this._delayTimeout),this._el){this._el.pause();try{this._el.currentTime=0,this._el.currentTime>0&&this._el.load()}catch(t){}this._playing=!1,this._paused=!1}},o.prototype.onEnded=function(t,e){this._endedCallback=t?t.bind(e||this):null},o.prototype._endedHandler=function(){this._playing=!1,this._paused=!1,this._loop?(this._el.currentTime=0,this._el.currentTime>0&&this._el.load(),this.play()):"function"==typeof this._endedCallback&&this._endedCallback(this)},Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._el?this._el.currentTime:0}}),Object.defineProperty(o.prototype,"duration",{get:function(){return this._el?this._el.duration:0}}),Object.defineProperty(o.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t}}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._paused}}),Object.defineProperty(o.prototype,"playing",{get:function(){return this._playing}}),Object.defineProperty(o.prototype,"progress",{get:function(){return this.currentTime/this.duration}}),Object.defineProperty(o.prototype,"sourceNode",{get:function(){return!this._sourceNode&&this._context&&(this._sourceNode=this._context.createMediaMediaSource(this._el)),this._sourceNode}}),"object"==typeof e&&e.exports&&(e.exports=o)},{}],5:[function(t,e){"use strict";function o(t,e){this.id="",this._context=e,this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0,this._stream=t}o.prototype.play=function(t){void 0===t&&(t=0),t>0&&(t=this._context.currentTime+t),this.sourceNode.start(t),this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime,this._pausedAt=0,this._playing=!0,this._paused=!1},o.prototype.pause=function(){var t=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=t,this._playing=!1,this._paused=!0},o.prototype.stop=function(){if(this._sourceNode){try{this._sourceNode.stop(0)}catch(t){}this._sourceNode=null}this._startedAt=0,this._pausedAt=0,this._playing=!1,this._paused=!1},Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._sourceNode&&(this._sourceNode.type=t)}}),Object.defineProperty(o.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this._sourceNode&&(this._sourceNode.frequency.value=t)}}),Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}}),Object.defineProperty(o.prototype,"duration",{get:function(){return 0}}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._paused}}),Object.defineProperty(o.prototype,"playing",{get:function(){return this._playing}}),Object.defineProperty(o.prototype,"progress",{get:function(){return 0}}),Object.defineProperty(o.prototype,"sourceNode",{get:function(){return this._sourceNode||(this._sourceNode=this._context.createMediaStreamSource(this._stream),navigator.mozGetUserMedia&&(window.mozHack=this._sourceNode)),this._sourceNode}}),"object"==typeof e&&e.exports&&(e.exports=o)},{}],6:[function(t,e){"use strict";function o(t){this._context=t,this._destination=null,this._nodeList=[],this._sourceNode=null}o.prototype.setSource=function(t){return this._sourceNode=t,this._updateConnections(),t},o.prototype.setDestination=function(t){return this.connectTo(t),t},o.prototype.add=function(t){return this._nodeList.push(t),this._updateConnections(),t},o.prototype.remove=function(t){for(var e=this._nodeList.length,o=0;e>o;o++)t===this._nodeList[o]&&this._nodeList.splice(o,1);return t.disconnect(),this._updateConnections(),t},o.prototype.removeAll=function(){for(;this._nodeList.length;)this._nodeList.pop().disconnect();return this._updateConnections(),this},o.prototype.connectTo=function(t){var e=this._nodeList.length;e>0?(this._nodeList[e-1].disconnect(),this._nodeList[e-1].connect(t)):this._sourceNode&&(this._sourceNode.disconnect(),this._sourceNode.connect(t)),this._destination=t},o.prototype._updateConnections=function(){if(this._sourceNode){for(var t=this._nodeList.length,e=0;t>e;e++)0===e?(this._sourceNode.disconnect(),this._sourceNode.connect(this._nodeList[e])):(this._nodeList[e-1].disconnect(),this._nodeList[e-1].connect(this._nodeList[e]));this._destination&&this.connectTo(this._destination)}},o.prototype.analyser=function(t){t=t||1024;var e=this._context.createAnalyser();return e.smoothingTimeConstant=.85,e.fftSize=t,this.add(e)},o.prototype.compressor=function(){var t=this._context.createDynamicsCompressor();return t.threshold.value=-24,t.knee.value=30,t.ratio.value=12,t.attack.value=3e-4,t.release.value=.25,this.add(t)},o.prototype.convolver=function(t){var e=this._context.createConvolver();return e.buffer=t,this.add(e)},o.prototype.delay=function(t,e,o){var i=this._context.createDelay(),n=this._context.createGain();return n.gain.value=o||.5,void 0!==e&&(i.delayTime.value=e),i.connect(n),t&&(t.connect(i),n.connect(t)),i},o.prototype.distortion=function(){var t=this._context.createWaveShaper();return this.add(t)},o.prototype.filter=function(t,e){var o=this._context.createBiquadFilter();return o.type=t,void 0!==e&&(o.frequency.value=e),this.add(o)},o.prototype.lowpass=function(t){return this.filter("lowpass",t)},o.prototype.highpass=function(t){return this.filter("highpass",t)},o.prototype.bandpass=function(t){return this.filter("bandpass",t)},o.prototype.lowshelf=function(t){return this.filter("lowshelf",t)},o.prototype.highshelf=function(t){return this.filter("highshelf",t)},o.prototype.peaking=function(t){return this.filter("peaking",t)},o.prototype.notch=function(t){return this.filter("notch",t)},o.prototype.allpass=function(t){return this.filter("allpass",t)},o.prototype.gain=function(t){if(!this._context){var e=function(){};return{gain:{value:1},connect:e,disconnect:e}}var o=this._context.createGain();return void 0!==t&&(o.gain.value=t),o},o.prototype.panner=function(){var t=this._context.createPanner();return t.panningModel="HRTF",t.distanceModel="linear",t.refDistance=1,t.maxDistance=1e3,t.rolloffFactor=1,this.add(t)},o.prototype.reverb=function(t,e,o,i){t=t||1,e=e||5,o=!!o;for(var n,s=2,r=this._context.sampleRate,u=r*t,c=this._context.createBuffer(s,u,r),h=c.getChannelData(0),a=c.getChannelData(1),p=0;u>p;p++)n=o?u-1:p,h[p]=(2*Math.random()-1)*Math.pow(1-n/u,e),a[p]=(2*Math.random()-1)*Math.pow(1-n/u,e);return i?(i.buffer=c,i):this.convolver(c)},o.prototype.scriptProcessor=function(t,e,o,i,n){t=t||1024,e=void 0===e?0:e,o=void 0===o?1:o;var s=this._context.createScriptProcessor(t,e,o);return s.onaudioprocess=function(t){i.call(n||this,t)},this.add(s)},"object"==typeof e&&e.exports&&(e.exports=o)},{}],7:[function(t,e){"use strict";function o(t,e){this.id="",this._context=e,this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0,this._type=t,this._frequency=200}o.prototype.play=function(t){void 0===t&&(t=0),t>0&&(t=this._context.currentTime+t),this.sourceNode.start(t),this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime,this._pausedAt=0,this._playing=!0,this._paused=!1},o.prototype.pause=function(){var t=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=t,this._playing=!1,this._paused=!0},o.prototype.stop=function(){if(this._sourceNode){try{this._sourceNode.stop(0)}catch(t){}this._sourceNode=null}this._startedAt=0,this._pausedAt=0,this._playing=!1,this._paused=!1},Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._sourceNode&&(this._sourceNode.type=t)}}),Object.defineProperty(o.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this._sourceNode&&(this._sourceNode.frequency.value=t)}}),Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}}),Object.defineProperty(o.prototype,"duration",{get:function(){return 0}}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._paused}}),Object.defineProperty(o.prototype,"playing",{get:function(){return this._playing}}),Object.defineProperty(o.prototype,"progress",{get:function(){return 0}}),Object.defineProperty(o.prototype,"sourceNode",{get:function(){return this._sourceNode||(this._sourceNode=this._context.createOscillator(),this._sourceNode.type=this._type,this._sourceNode.frequency.value=this._frequency),this._sourceNode}}),"object"==typeof e&&e.exports&&(e.exports=o)},{}],8:[function(t,e){"use strict";function o(t,e,o,i,n){this.id="",this._context=n,this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0,this._bufferSize=t,this._channels=e,this._onProcess=o.bind(i||this)}o.prototype.play=function(t){void 0===t&&(t=0),t>0&&(t=this._context.currentTime+t),this.sourceNode.onaudioprocess=this._onProcess,this.sourceNode.start(t),this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime,this._pausedAt=0,this._playing=!0,this._paused=!1},o.prototype.pause=function(){var t=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=t,this._playing=!1,this._paused=!0},o.prototype.stop=function(){this._sourceNode&&(this._sourceNode.onaudioprocess=this._onPaused),this._startedAt=0,this._pausedAt=0,this._playing=!1,this._paused=!1},o.prototype._onPaused=function(t){for(var e=t.outputBuffer,o=0,i=e.numberOfChannels;i>o;o++)for(var n=e.getChannelData(o),s=0,r=n.length;r>s;s++)n[s]=0},Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._sourceNode&&(this._sourceNode.type=t)}}),Object.defineProperty(o.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this._sourceNode&&(this._sourceNode.frequency.value=t)}}),Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}}),Object.defineProperty(o.prototype,"duration",{get:function(){return 0}}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._paused}}),Object.defineProperty(o.prototype,"playing",{get:function(){return this._playing}}),Object.defineProperty(o.prototype,"progress",{get:function(){return 0}}),Object.defineProperty(o.prototype,"sourceNode",{get:function(){return this._sourceNode||(this._sourceNode=this._context.createScriptProcessor(this._bufferSize,0,this._channels)),this._sourceNode}}),"object"==typeof e&&e.exports&&(e.exports=o)},{}],9:[function(t,e){"use strict";function o(t,e,o){this.id="",this._context=t,this._data=null,this._endedCallback=null,this._loop=!1,this._pausedAt=0,this._playWhenReady=!1,this._source=null,this._startedAt=0,this._node=new s(this._context),this._gain=this._node.gain(),this._context&&(this._node.setDestination(this._gain),this._gain.connect(o||this._context.destination)),this.setData(e)}var i=t("./buffer-source.js"),n=t("./media-source.js"),s=t("./node-manager.js"),r=t("./microphone-source.js"),u=t("./oscillator-source.js"),c=t("./script-source.js");o.prototype.setData=function(t){return t?(this._data=t,this._source=this._data.tagName?new n(t,this._context):new i(t,this._context),this._node.setSource(this._source.sourceNode),this._source.onEnded(this._endedHandler,this),this._playWhenReady&&this.play(),this):this},o.prototype.oscillator=function(t){return this._source=new u(t||"sine",this._context),this._node.setSource(this._source.sourceNode),this.setType=function(t){this._source.type=t}.bind(this),this.setFrequency=function(t){this._source.frequency=t}.bind(this),this},o.prototype.microphone=function(t){return this._source=new r(t,this._context),this._node.setSource(this._source.sourceNode),this},o.prototype.script=function(t,e,o,i){return this._source=new c(t,e,o,i,this._context),this._node.setSource(this._source.sourceNode),this},o.prototype.play=function(t,e){return this._source?(this._node.setSource(this._source.sourceNode),this._source.loop=this._loop,this._context||(this.volume=this.volume),this._source.play(t,e),this):(this._playWhenReady=!0,this)},o.prototype.pause=function(){return this._source?(this._source.pause(),this):this},o.prototype.stop=function(){return this._source?(this._source.stop(),this):this},o.prototype.seek=function(t){return this._source?(this.stop(),this.play(0,this._source.duration*t),this):this},o.prototype.onEnded=function(t,e){return this._endedCallback=t?t.bind(e||this):null,this},o.prototype._endedHandler=function(){"function"==typeof this._endedCallback&&this._endedCallback(this)},Object.defineProperty(o.prototype,"context",{get:function(){return this._context}}),Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._source?this._source.currentTime:0}}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data}}),Object.defineProperty(o.prototype,"duration",{get:function(){return this._source?this._source.duration:0}}),Object.defineProperty(o.prototype,"gain",{get:function(){return this._gain}}),Object.defineProperty(o.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=!!t,this._source&&(this._source.loop=this._loop)}}),Object.defineProperty(o.prototype,"node",{get:function(){return this._node}}),Object.defineProperty(o.prototype,"paused",{get:function(){return this._source?this._source.paused:!1}}),Object.defineProperty(o.prototype,"playing",{get:function(){return this._source?this._source.playing:!1}}),Object.defineProperty(o.prototype,"progress",{get:function(){return this._source?this._source.progress:0}}),Object.defineProperty(o.prototype,"volume",{get:function(){return this._gain.gain.value},set:function(t){isNaN(t)||(this._gain.gain.value=t,this._data&&void 0!==this._data.volume&&(this._data.volume=t))}}),"object"==typeof e&&e.exports&&(e.exports=o)},{"./buffer-source.js":2,"./media-source.js":4,"./microphone-source.js":5,"./node-manager.js":6,"./oscillator-source.js":7,"./script-source.js":8}],10:[function(t,e){"use strict";function o(){this._init()}o.prototype._init=function(){var t=document.createElement("audio");if(!t)return[];var e=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}];this._extensions=[],this._canPlay={};for(var o=0;o<e.length;o++){var i=e[o],n=!!t.canPlayType(i.type);n&&this._extensions.push(i.ext),this._canPlay[i.ext]=n}},o.prototype.getFileExtension=function(t){t=t.split("?")[0],t=t.substr(t.lastIndexOf("/")+1);var e=t.split(".");return 1===e.length||""===e[0]&&2===e.length?"":e.pop().toLowerCase()},o.prototype.getSupportedFile=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++){var o=this.getFileExtension(t[e]),i=this._extensions.indexOf(o);if(i>-1)return t[e]}else if(t instanceof Object)for(var n in t){var s=this.getFileExtension(t[n]),r=this._extensions.indexOf(s);if(r>-1)return t[n]}return t},Object.defineProperty(o.prototype,"extensions",{get:function(){return this._extensions}}),Object.defineProperty(o.prototype,"canPlay",{get:function(){return this._canPlay}}),"object"==typeof e&&e.exports&&(e.exports=o)},{}],11:[function(t,e){"use strict";function o(t){this._context=t}o.prototype.isAudioBuffer=function(t){return!!(t&&window.AudioBuffer&&t instanceof window.AudioBuffer)},o.prototype.isMediaElement=function(t){return!!(t&&window.HTMLMediaElement&&t instanceof window.HTMLMediaElement)},o.prototype.fade=function(t,e,o){t.gain.linearRampToValueAtTime(e,this._context.currentTime+o)},o.prototype.filter=function(t,e,o,i){isNaN(e)&&(e=.5),isNaN(o)&&(o=0),isNaN(i)&&(i=0),t.frequency.value=this.getFrequency(e),t.Q.value=o,t.gain.value=i},o.prototype.getFrequency=function(t){var e=40,o=this._context.sampleRate/2,i=Math.log(o/e)/Math.LN2,n=Math.pow(2,i*(t-1));return o*n},o.prototype.distort=function(t){for(var e=100*t,o=22050,i=new Float32Array(o),n=Math.PI/180,s=0;o>s;s++){var r=2*s/o-1;i[s]=(3+e)*r*20*n/(Math.PI+e*Math.abs(r))}return i},o.prototype.timeCode=function(t,e){void 0===e&&(e=":");var o=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60),s=0===o?"":10>o?"0"+o+e:o+e,r=(10>i?"0"+i:i)+e,u=10>n?"0"+n:n;return s+r+u},o.prototype.pan=function(t){return new o.Pan(t)},o.prototype.waveform=function(t,e){return new o.Waveform(t,e)},o.Pan=function(t){this._panner=t},o.Pan.prototype={x:function(t){var e=parseFloat(t,10)*Math.PI/4,o=e+Math.PI/2;o>Math.PI/2&&(o=Math.PI-o),e=Math.sin(e),o=Math.sin(o),this._panner.setPosition(e,0,o)},xyz:function(t,e,o){t=t||0,e=e||0,o=o||0,this._panner.setPosition(t,e,o)},setSourcePosition:function(t){this._panner.setPosition(t.x,t.y,t.z)},setSourceOrientation:function(t){this.setOrientation(this._panner,t)},setListenerPosition:function(t){this._context.listener.setPosition(t.x,t.y,t.z)},setListenerOrientation:function(t){this.setOrientation(this._context.listener,t)},doppler:function(t,e,o,i,n,s,r){this._panner.setPosition(t,e,o),this._panner.setVelocity(i/r,n/r,s/r)},setOrientation:function(t,e){var o={x:e.x,y:e.y,z:e.z};this.normalize(o);var i={x:0,y:1,z:0},n={x:e.x,y:e.y,z:e.z};this.crossProduct(n,i),this.crossProduct(n,e),this.normalize(n),t.setOrientation(o.x,o.y,o.z,n.x,n.y,n.z)},crossProduct:function(t,e){var o=t.x,i=t.y,n=t.z,s=e.x,r=e.y,u=e.z;return t.x=i*u-n*r,t.y=n*s-o*u,t.z=o*r-i*s,this},normalize:function(t){if(0===t.x&&0===t.y&&0===t.z)return t;var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),o=1/e;return t.x*=o,t.y*=o,t.z*=o,t}},o.Waveform=function(t,e){this.data=this.getData(t,e)},o.Waveform.prototype={getData:function(t,e){var o=new Float32Array(e),i=Math.floor(t.length/e),n=5,s=Math.floor(i/n),r=0;1>s&&(s=1);for(var u=0,c=t.numberOfChannels;c>u;u++)for(var h=t.getChannelData(u),a=0;e>a;a++)for(var p=a*i,d=p+i;d>p;p+=s){var l=h[p];0>l&&(l=-l),l>o[a]&&(o[a]=l),l>r&&(r=l)}var f=1/r,_=o.length;for(u=0;_>u;u++)o[u]*=f;return o},getCanvas:function(t,e,o,i){var n=i||document.createElement("canvas"),s=n.width=this.data.length;n.height=t;var r=n.getContext("2d");r.strokeStyle=e,r.fillStyle=o,r.fillRect(0,0,s,t);var u,c;r.beginPath();for(var h=0,a=this.data.length;a>h;h++)u=h+.5,c=t-Math.round(t*this.data[h]),r.moveTo(u,c),r.lineTo(u,t);return r.stroke(),n}},"object"==typeof e&&e.exports&&(e.exports=o)},{}],12:[function(t,e){"use strict";function o(){this.VERSION="0.0.0",window.AudioContext=window.AudioContext||window.webkitAudioContext,this._context=window.AudioContext?new window.AudioContext:null,this._node=new n(this._context),this._masterGain=this._node.gain(),this._context&&(this._node.setSource(this._masterGain),this._node.setDestination(this._context.destination)),this._sounds=[],this._support=new r,this.handleTouchlock(),this.handleVisibility()}var i=t("./lib/loader.js"),n=t("./lib/node-manager.js"),s=t("./lib/sound.js"),r=t("./lib/support.js"),u=t("./lib/utils.js");o.prototype.sound=function(t){if(t&&!this.utils.isAudioBuffer(t)&&!this.utils.isMediaElement(t))return this.load(t);var e=new s(this._context,t,this._masterGain);return this._sounds.push(e),e},o.prototype.oscillator=function(t){var e=this.sound();return e.oscillator(t),e},o.prototype.microphone=function(t){var e=this.sound();return e.microphone(t),e},o.prototype.script=function(t,e,o,i){var n=this.sound();return n.script(t,e,o,i),n},o.prototype.destroy=function(t){for(var e,o=0,i=this._sounds.length;i>o&&(e=this._sounds[o],e!==t&&e.id!==t);o++);if(void 0!==e){this._sounds.splice(o,1),e.loader&&e.loader.cancel();try{e.stop()}catch(n){}}},o.prototype.getById=function(t){for(var e=0,o=this._sounds.length;o>e;e++)if(this._sounds[e].id===t)return this._sounds[e];return null},o.prototype.load=function(t,e,o,i,n){if(this._loader||this._initLoader(),t instanceof Array&&t.length&&"object"==typeof t[0])return void this.loadMultiple(t,e,o,i,n);var s=this._queue(t,n);return o&&s.loader.onProgress.add(o,i||this),e&&s.loader.onComplete.addOnce(function(){e.call(i||this,s)}),s.loader.start(),s},o.prototype.loadMultiple=function(t,e,o,i,n){for(var s=[],r=0,u=t.length;u>r;r++){var c=t[r],h=this._queue(c.url,n);c.id&&(h.id=c.id),s.push(h)}o&&this._loader.onProgress.add(function(t){o.call(i||this,t)}),e&&this._loader.onComplete.addOnce(function(){e.call(i||this,s)}),this._loader.start()},o.prototype._initLoader=function(){this._loader=new i,this._loader.touchLocked=this._isTouchLocked,this._loader.webAudioContext=this._context,this._loader.crossOrigin=!0},o.prototype._queue=function(t,e){this._loader||this._initLoader(),t=this._support.getSupportedFile(t);var o=this.sound();return o.loader=this._loader.add(t),o.loader.onBeforeComplete.addOnce(function(t){o.setData(t)}),e&&(o.loader.webAudioContext=null),o},o.prototype.mute=function(){this._preMuteVolume=this.volume,this.volume=0},o.prototype.unMute=function(){this.volume=this._preMuteVolume||1},Object.defineProperty(o.prototype,"volume",{get:function(){return this._masterGain.gain.value},set:function(t){if(!isNaN(t)&&(this._masterGain.gain.value=t,!this.hasWebAudio))for(var e=0,o=this._sounds.length;o>e;e++)this._sounds[e].volume=t}}),o.prototype.pauseAll=function(){for(var t=0,e=this._sounds.length;e>t;t++)this._sounds[t].playing&&this._sounds[t].pause()},o.prototype.resumeAll=function(){for(var t=0,e=this._sounds.length;e>t;t++)this._sounds[t].paused&&this._sounds[t].play()},o.prototype.stopAll=function(){for(var t=0,e=this._sounds.length;e>t;t++)this._sounds[t].stop()},o.prototype.play=function(t,e,o){this.get(t).play(e,o)},o.prototype.pause=function(t){this.get(t).pause()},o.prototype.stop=function(t){this.get(t).stop()},o.prototype.handleTouchlock=function(){var t=navigator.userAgent,e=!!t.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i),o=this,i=function(){if(document.body.removeEventListener("touchstart",i),o._isTouchLocked=!1,this._loader.touchLocked=!1,o.context){var t=o.context.createBuffer(1,1,22050),e=o.context.createBufferSource();e.buffer=t,e.connect(o.context.destination),e.start(0)}};e&&document.body.addEventListener("touchstart",i,!1),this._isTouchLocked=e},o.prototype.handleVisibility=function(){function t(){for(var t=r.length,e=0;t>e;e++){var o=r[e];o.playing&&(o.pause(),s.push(o))}}function e(){for(;s.length;)s.pop().play()}function o(){document[i]?t():e()}var i,n,s=[],r=this._sounds;"undefined"!=typeof document.hidden?(i="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",n="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",n="webkitvisibilitychange"),void 0!==n&&document.addEventListener(n,o,!1)
},o.prototype.log=function(t){var e="Sono "+this.VERSION,o="Supported:"+this.isSupported+" WebAudioAPI:"+this.hasWebAudio+" TouchLocked:"+this._isTouchLocked+" Extensions:"+this._support.extensions;if(t&&navigator.userAgent.indexOf("Chrome")>-1){var i=["%c %c "+e+" %c %c "+o+" %c ","background: #17d186","color: #000000; background: #d0f736; font-weight: bold","background: #17d186","background: #f7f94f","background: #17d186"];console.log.apply(console,i)}else window.console},Object.defineProperty(o.prototype,"canPlay",{get:function(){return this._support.canPlay}}),Object.defineProperty(o.prototype,"context",{get:function(){return this._context}}),Object.defineProperty(o.prototype,"hasWebAudio",{get:function(){return!!this._context}}),Object.defineProperty(o.prototype,"isSupported",{get:function(){return this._support.extensions.length>0}}),Object.defineProperty(o.prototype,"loader",{get:function(){return this._loader}}),Object.defineProperty(o.prototype,"masterGain",{get:function(){return this._masterGain}}),Object.defineProperty(o.prototype,"node",{get:function(){return this._node}}),Object.defineProperty(o.prototype,"sounds",{get:function(){return this._sounds}}),Object.defineProperty(o.prototype,"utils",{get:function(){return this._utils||(this._utils=new u(this._context)),this._utils}}),"object"==typeof e&&e.exports&&(e.exports=new o)},{"./lib/loader.js":3,"./lib/node-manager.js":6,"./lib/sound.js":9,"./lib/support.js":10,"./lib/utils.js":11}]},{},[12])(12)});