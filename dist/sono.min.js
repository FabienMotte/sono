!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Sono=e()}}(function(){return function e(t,n,o){function i(r,c){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!c&&u)return u(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var h=n[r]={exports:{}};t[r][0].call(h.exports,function(e){var n=t[r][1][e];return i(n?n:e)},h,h.exports,e,t,n,o)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({"./src/sono.js":[function(e,t){"use strict";function n(){this.VERSION="0.0.7",window.AudioContext=window.AudioContext||window.webkitAudioContext;var e=window.AudioContext?new window.AudioContext:null,t=e?e.destination:null;this._group=new s(e,t),this._gain=this._group.gain,this._sounds=this._group.sounds,this._context=e,a.setContext(e),this._handleTouchlock(),this._handlePageVisibility()}var o=e("./lib/utils/browser.js"),i=e("./lib/utils/file.js"),s=e("./lib/group.js"),r=e("./lib/utils/loader.js"),c=e("./lib/sound.js"),u=e("./lib/utils/sound-group.js"),a=e("./lib/utils/utils.js");n.prototype.createSound=function(e){if(i.containsURL(e))return this.load(e);var t=e&&e.noWebAudio?null:this._context,n=new c(t,this._gain);return n.isTouchLocked=this._isTouchLocked,e&&(n.data=e.data||e,n.id=void 0!==e.id?e.id:"",n.loop=!!e.loop,n.volume=e.volume),this._group.add(n),n},n.prototype.destroySound=function(e){return e?(this._sounds.some(function(t,n,o){return t===e||t.id===e?(o.splice(n,1),t.destroy(),!0):void 0}),this):void 0},n.prototype.destroyAll=function(){return this._group.destroy(),this},n.prototype.getSound=function(e){var t=null;return this._sounds.some(function(n){return n.id===e?(t=n,!0):void 0}),t},n.prototype.createGroup=function(e){var t=new u(this._context,this._gain);return e&&e.forEach(function(e){t.add(e)}),t},n.prototype.load=function(e){if(!e)throw new Error("ArgumentException: Sono.load: param config is undefined");var t,n,o=e.onProgress,s=e.onComplete,c=e.thisArg||e.context||this,u=e.url||e;if(i.containsURL(u))t=this._queue(e),n=t.loader;else{if(!Array.isArray(u)||!i.containsURL(u[0].url))return null;t=[],n=new r.Group,u.forEach(function(e){t.push(this._queue(e,n))},this)}return o&&n.on("progress",function(e){o.call(c,e)}),s&&n.once("complete",function(){n.off("progress"),s.call(c,t)}),n.start(),t},n.prototype._queue=function(e,t){var n=e&&e.noWebAudio?null:this._context,o=new c(n,this._gain);return o.isTouchLocked=this._isTouchLocked,this._group.add(o),o.id=void 0!==e.id?e.id:"",o.loop=!!e.loop,o.volume=e.volume,o.load(e),t&&t.add(o.loader),o},n.prototype.mute=function(){return this._group.mute(),this},n.prototype.unMute=function(){return this._group.unMute(),this},Object.defineProperty(n.prototype,"volume",{get:function(){return this._group.volume},set:function(e){this._group.volume=e}}),n.prototype.fade=function(e,t){return this._group.fade(e,t),this},n.prototype.pauseAll=function(){return this._group.pause(),this},n.prototype.resumeAll=function(){return this._group.resume(),this},n.prototype.stopAll=function(){return this._group.stop(),this},n.prototype.play=function(e,t,n){return this.getSound(e).play(t,n),this},n.prototype.pause=function(e){return this.getSound(e).pause(),this},n.prototype.stop=function(e){return this.getSound(e).stop(),this},n.prototype._handleTouchlock=function(){var e=function(){this._isTouchLocked=!1,this._sounds.forEach(function(e){e.isTouchLocked=!1,e.loader&&(e.loader.isTouchLocked=!1)})};this._isTouchLocked=o.handleTouchLock(e,this)},n.prototype._handlePageVisibility=function(){function e(){i.forEach(function(e){e.playing&&(e.pause(),n.push(e))})}function t(){for(;n.length;)n.pop().play()}var n=[],i=this._sounds;o.handlePageVisibility(e,t,this)},n.prototype.log=function(){var e="Sono "+this.VERSION,t="Supported:"+this.isSupported+" WebAudioAPI:"+this.hasWebAudio+" TouchLocked:"+this._isTouchLocked+" Extensions:"+i.extensions;if(navigator.userAgent.indexOf("Chrome")>-1){var n=["%c ♫ "+e+" ♫ %c "+t+" ","color: #FFFFFF; background: #379F7A","color: #1F1C0D; background: #E0FBAC"];console.log.apply(console,n)}else window.console&&window.console.log.call&&console.log.call(console,e+" "+t)},Object.defineProperties(n.prototype,{canPlay:{get:function(){return i.canPlay}},context:{get:function(){return this._context}},effect:{get:function(){return this._group.effect}},extensions:{get:function(){return i.extensions}},hasWebAudio:{get:function(){return!!this._context}},isSupported:{get:function(){return i.extensions.length>0}},gain:{get:function(){return this._gain}},sounds:{get:function(){return this._group.sounds.slice(0)}},utils:{get:function(){return a}}}),t.exports=new n},{"./lib/group.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/group.js","./lib/sound.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/sound.js","./lib/utils/browser.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/browser.js","./lib/utils/file.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/file.js","./lib/utils/loader.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/loader.js","./lib/utils/sound-group.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/sound-group.js","./lib/utils/utils.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/utils.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/node_modules/browserify/node_modules/events/events.js":[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,c,u,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],r(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,c=new Array(i-1),u=1;i>u;u++)c[u-1]=arguments[u];n.apply(this,c)}else if(s(n)){for(i=arguments.length,c=new Array(i-1),u=1;i>u;u++)c[u-1]=arguments[u];for(a=n.slice(),i=a.length,u=0;i>u;u++)a[u].apply(this,c)}return!0},n.prototype.addListener=function(e,t){var i;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,"function"==typeof console.trace)}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,r,c;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],r=n.length,i=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(c=r;c-->0;)if(n[c]===t||n[c].listener&&n[c].listener===t){i=c;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect.js":[function(e,t){"use strict";function n(e){this._context=e||new r,this._destination=null,this._nodeList=[],this._sourceNode=null}var o=e("./effect/analyser.js"),i=e("./effect/distortion.js"),s=e("./effect/echo.js"),r=e("./effect/fake-context.js"),c=e("./effect/filter.js"),u=e("./effect/flanger.js"),a=e("./effect/panner.js"),h=e("./effect/phaser.js"),l=e("./effect/recorder.js"),d=e("./effect/reverb.js");n.prototype.add=function(e){return e?(this._nodeList.push(e),this._updateConnections(),e):void 0},n.prototype.remove=function(e){for(var t=this._nodeList.length,n=0;t>n;n++)if(e===this._nodeList[n]){this._nodeList.splice(n,1);break}var o=e._output||e;return o.disconnect(),this._updateConnections(),e},n.prototype.removeAll=function(){for(;this._nodeList.length;)this._nodeList.pop().disconnect();return this._updateConnections(),this},n.prototype.destroy=function(){this._context=null,this._destination=null,this._nodeList=[],this._sourceNode=null},n.prototype._connect=function(e,t){var n=e._output||e;n.disconnect(),n.connect(t)},n.prototype._connectToDestination=function(e){var t=this._nodeList.length,n=t?this._nodeList[t-1]:this._sourceNode;n&&this._connect(n,e),this._destination=e},n.prototype._updateConnections=function(){if(this._sourceNode){for(var e,t,n=0;n<this._nodeList.length;n++)e=this._nodeList[n],t=0===n?this._sourceNode:this._nodeList[n-1],this._connect(t,e);this._destination&&this._connectToDestination(this._destination)}},Object.defineProperty(n.prototype,"panning",{get:function(){return this._panning||(this._panning=new a(this._context)),this._panning}}),n.prototype.analyser=function(e,t,n,i){var s=new o(this._context,e,t,n,i);return this.add(s)},n.prototype.compressor=function(e){e=e||{};var t=this._context.createDynamicsCompressor();return t.update=function(e){t.threshold.value=void 0!==e.threshold?e.threshold:-24,t.knee.value=void 0!==e.knee?e.knee:30,t.ratio.value=void 0!==e.ratio?e.ratio:12,t.reduction.value=void 0!==e.reduction?e.reduction:-10,t.attack.value=void 0!==e.attack?e.attack:3e-4,t.release.value=void 0!==e.release?e.release:.25},t.update(e),this.add(t)},n.prototype.convolver=function(e){var t=this._context.createConvolver();return t.buffer=e,this.add(t)},n.prototype.delay=function(e){var t=this._context.createDelay();return void 0!==e&&(t.delayTime.value=e),this.add(t)},n.prototype.echo=function(e,t){var n=new s(this._context,e,t);return this.add(n)},n.prototype.distortion=function(e){var t=new i(this._context,e);return this.add(t)},n.prototype.filter=function(e,t,n,o){var i=new c(this._context,e,t,n,o);return this.add(i)},n.prototype.lowpass=function(e,t,n){return this.filter("lowpass",e,t,n)},n.prototype.highpass=function(e,t,n){return this.filter("highpass",e,t,n)},n.prototype.bandpass=function(e,t,n){return this.filter("bandpass",e,t,n)},n.prototype.lowshelf=function(e,t,n){return this.filter("lowshelf",e,t,n)},n.prototype.highshelf=function(e,t,n){return this.filter("highshelf",e,t,n)},n.prototype.peaking=function(e,t,n){return this.filter("peaking",e,t,n)},n.prototype.notch=function(e,t,n){return this.filter("notch",e,t,n)},n.prototype.allpass=function(e,t,n){return this.filter("allpass",e,t,n)},n.prototype.flanger=function(e){var t=new u(this._context,e);return this.add(t)},n.prototype.gain=function(e){var t=this._context.createGain();return void 0!==e&&(t.gain.value=e),t},n.prototype.panner=function(){var e=new a(this._context);return this.add(e)},n.prototype.phaser=function(e){var t=new h(this._context,e);return this.add(t)},n.prototype.recorder=function(e){var t=new l(this._context,e);return this.add(t)},n.prototype.reverb=function(e,t,n){var o=new d(this._context,e,t,n);return this.add(o)},n.prototype.script=function(e){e=e||{};var t=e.bufferSize||1024,n=void 0===e.inputChannels?0:n,o=void 0===e.outputChannels?1:o,i=this._context.createScriptProcessor(t,n,o),s=e.thisArg||e.context||i,r=e.callback||function(){};return i.onaudioprocess=r.bind(s),this.add(i)},n.prototype.setSource=function(e){return this._sourceNode=e,this._updateConnections(),e},n.prototype.setDestination=function(e){return this._connectToDestination(e),e},t.exports=n},{"./effect/analyser.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/analyser.js","./effect/distortion.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/distortion.js","./effect/echo.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/echo.js","./effect/fake-context.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/fake-context.js","./effect/filter.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/filter.js","./effect/flanger.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/flanger.js","./effect/panner.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/panner.js","./effect/phaser.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/phaser.js","./effect/recorder.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/recorder.js","./effect/reverb.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/reverb.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/analyser.js":[function(e,t){"use strict";function n(e,t,n,o,i){t=t||32;var s,r,c=e.createAnalyser();c.fftSize=t,void 0!==n&&(c.smoothingTimeConstant=n),void 0!==o&&(c.minDecibels=o),void 0!==i&&(c.maxDecibels=i);var u=function(){(t!==c.fftSize||void 0===s)&&(s=new Uint8Array(c.fftSize),r=new Uint8Array(c.frequencyBinCount),t=c.fftSize)};return u(),c.getWaveform=function(){return u(),this.getByteTimeDomainData(s),s},c.getFrequencies=function(){return u(),this.getByteFrequencyData(r),r},Object.defineProperties(c,{smoothing:{get:function(){return c.smoothingTimeConstant},set:function(e){c.smoothingTimeConstant=e}}}),c}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/distortion.js":[function(e,t){"use strict";function n(e,t){t=t||1;var n=e.createWaveShaper();return n.update=function(e){t=e;for(var n,o=100*e,i=22050,s=new Float32Array(i),r=Math.PI/180,c=0;i>c;c++)n=2*c/i-1,s[c]=(3+o)*n*20*r/(Math.PI+o*Math.abs(n));this.curve=s},Object.defineProperties(n,{amount:{get:function(){return t},set:function(e){this.update(e)}}}),void 0!==t&&n.update(t),n}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/echo.js":[function(e,t){"use strict";function n(e,t,n){var o=e.createGain(),i=e.createDelay(),s=e.createGain(),r=e.createGain();s.gain.value=n||.5,i.delayTime.value=t||.5,o.connect(i),o.connect(r),i.connect(s),s.connect(i),s.connect(r);var c=o;return c.name="Echo",c._output=r,Object.defineProperties(c,{delay:{get:function(){return i.delayTime.value},set:function(e){i.delayTime.value=e}},feedback:{get:function(){return s.gain.value},set:function(e){s.gain.value=e}}}),c}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/fake-context.js":[function(e,t){"use strict";function n(){var e=Date.now(),t=function(){},n=function(){return{value:1,defaultValue:1,linearRampToValueAtTime:t,setValueAtTime:t,exponentialRampToValueAtTime:t,setTargetAtTime:t,setValueCurveAtTime:t,cancelScheduledValues:t}},o=function(){return{connect:t,disconnect:t,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:t,getByteFrequencyData:t,getFloatTimeDomainData:t,getFloatFrequencyData:t,gain:n(),panningModel:0,setPosition:t,setOrientation:t,setVelocity:t,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:n(),delayTime:n(),buffer:0,threshold:n(),knee:n(),ratio:n(),attack:n(),release:n(),reduction:n(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:t,copyToChannel:t,dopplerFactor:0,speedOfSound:0,start:t}};return window.Uint8Array||(window.Int8Array=window.Uint8Array=window.Uint8ClampedArray=window.Int16Array=window.Uint16Array=window.Int32Array=window.Uint32Array=window.Float32Array=window.Float64Array=Array),{createAnalyser:o,createBuffer:o,createBiquadFilter:o,createChannelMerger:o,createChannelSplitter:o,createDynamicsCompressor:o,createConvolver:o,createDelay:o,createGain:o,createOscillator:o,createPanner:o,createScriptProcessor:o,createWaveShaper:o,listener:o(),get currentTime(){return(Date.now()-e)/1e3}}}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/filter.js":[function(e,t){"use strict";function n(e,t,n,o,i){var s=40,r=e.sampleRate/2,c=e.createBiquadFilter();c.type=t,void 0!==n&&(c.frequency.value=n),void 0!==o&&(c.Q.value=o),void 0!==i&&(c.gain.value=i);var u=function(e){var t=Math.log(r/s)/Math.LN2,n=Math.pow(2,t*(e-1));return r*n};return c.update=function(e,t){void 0!==e&&(this.frequency.value=e),void 0!==t&&(this.gain.value=t)},c.setByPercent=function(e,t,n){c.frequency.value=u(e),void 0!==t&&(c.Q.value=t),void 0!==n&&(c.gain.value=n)},c}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/flanger.js":[function(e,t){"use strict";function n(e,t){var n=t.feedback||.5,o=t.delay||.005,i=t.gain||.002,s=t.frequency||.25,r=e.createGain(),c=e.createDelay(),u=e.createGain(),a=e.createOscillator(),h=e.createGain(),l=e.createGain();c.delayTime.value=o,u.gain.value=n,a.type="sine",a.frequency.value=s,h.gain.value=i,r.connect(l),r.connect(c),c.connect(l),c.connect(u),u.connect(r),a.connect(h),h.connect(c.delayTime),a.start(0);var d=r;return d.name="Flanger",d._output=l,Object.defineProperties(d,{delay:{get:function(){return c.delayTime.value},set:function(e){c.delayTime.value=e}},lfoFrequency:{get:function(){return a.frequency.value},set:function(e){a.frequency.value=e}},lfoGain:{get:function(){return h.gain.value},set:function(e){h.gain.value=e}},feedback:{get:function(){return u.gain.value},set:function(e){u.gain.value=e}}}),d}function o(e,t){var n=t.feedback||.5,o=t.delay||.003,i=t.gain||.005,s=t.frequency||.5,r=e.createGain(),c=e.createChannelSplitter(2),u=e.createChannelMerger(2),a=e.createGain(),h=e.createGain(),l=e.createOscillator(),d=e.createGain(),p=e.createGain(),f=e.createDelay(),_=e.createDelay(),g=e.createGain();a.gain.value=h.gain.value=n,f.delayTime.value=_.delayTime.value=o,l.type="sine",l.frequency.value=s,d.gain.value=i,p.gain.value=0-i,r.connect(c),c.connect(f,0),c.connect(_,1),f.connect(a),_.connect(h),a.connect(_),h.connect(f),f.connect(u,0,0),_.connect(u,0,1),u.connect(g),r.connect(g),l.connect(d),l.connect(p),d.connect(f.delayTime),p.connect(_.delayTime),l.start(0);var y=r;return y.name="StereoFlanger",y._output=g,Object.defineProperties(y,{delay:{get:function(){return f.delayTime.value},set:function(e){f.delayTime.value=_.delayTime.value=e}},lfoFrequency:{get:function(){return l.frequency.value},set:function(e){l.frequency.value=e}},lfoGain:{get:function(){return d.gain.value},set:function(e){d.gain.value=p.gain.value=e}},feedback:{get:function(){return a.gain.value},set:function(e){a.gain.value=h.gain.value=e}}}),y}function i(e,t){return t=t||{},t.stereo?new o(e,t):new n(e,t)}t.exports=i},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/panner.js":[function(e,t){"use strict";function n(e){var t=e.createPanner();t.panningModel=n.defaults.panningModel,t.distanceModel=n.defaults.distanceModel,t.refDistance=n.defaults.refDistance,t.maxDistance=n.defaults.maxDistance,t.rolloffFactor=n.defaults.rolloffFactor,t.coneInnerAngle=n.defaults.coneInnerAngle,t.coneOuterAngle=n.defaults.coneOuterAngle,t.coneOuterGain=n.defaults.coneOuterGain,t.setPosition(0,0,0),t.setOrientation(0,0,0);var o={pool:[],get:function(e,t,n){var o=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return void 0!==e&&isNaN(e)&&"x"in e&&"y"in e&&"z"in e?(o.x=e.x||0,o.y=e.y||0,o.z=e.z||0):(o.x=e||0,o.y=t||0,o.z=n||0),o},dispose:function(e){this.pool.push(e)}},i=o.get(0,1,0),s=function(e,t){var n=o.get(t.x,t.y,t.z);u(n,i),u(n,t),a(n),a(t),e.setOrientation(t.x,t.y,t.z,n.x,n.y,n.z),o.dispose(t),o.dispose(n)},r=function(e,t){e.setPosition(t.x,t.y,t.z),o.dispose(t)},c=function(e,t){e.setVelocity(t.x,t.y,t.z),o.dispose(t)},u=function(e,t){var n=e.x,o=e.y,i=e.z,s=t.x,r=t.y,c=t.z;e.x=o*c-i*r,e.y=i*s-n*c,e.z=n*r-o*s},a=function(e){if(0===e.x&&0===e.y&&0===e.z)return e;var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),n=1/t;return e.x*=n,e.y*=n,e.z*=n,e};return t.setX=function(e){var n=Math.PI/4,o=2*n,i=e*n,s=i+o;s>o&&(s=Math.PI-s),i=Math.sin(i),s=Math.sin(s),t.setPosition(i,0,s)},t.setSourcePosition=function(e,n,i){r(t,o.get(e,n,i))},t.setSourceOrientation=function(e,n,i){s(t,o.get(e,n,i))},t.setSourceVelocity=function(e,n,i){c(t,o.get(e,n,i))},t.setListenerPosition=function(t,n,i){r(e.listener,o.get(t,n,i))},t.setListenerOrientation=function(t,n,i){s(e.listener,o.get(t,n,i))},t.setListenerVelocity=function(t,n,i){c(e.listener,o.get(t,n,i))},t.calculateVelocity=function(e,t,n){var i=e.x-t.x,s=e.y-t.y,r=e.z-t.z;return o.get(i/n,s/n,r/n)},t.setDefaults=function(e){Object.keys(e).forEach(function(t){n.defaults[t]=e[t]})},t}n.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/phaser.js":[function(e,t){"use strict";function n(e,t){t=t||{};var n,o=t.stages||8,i=t.frequency||.5,s=t.gain||300,r=t.feedback||.5,c=[],u=e.createGain(),a=e.createGain(),h=e.createOscillator(),l=e.createGain(),d=e.createGain();a.gain.value=r,h.type="sine",h.frequency.value=i,l.gain.value=s;for(var p=0;o>p;p++)n=e.createBiquadFilter(),n.type="allpass",n.frequency.value=1e3*p,p>0&&c[p-1].connect(n),l.connect(n.frequency),c.push(n);var f=c[0],_=c[c.length-1];u.connect(f),u.connect(d),_.connect(d),_.connect(a),a.connect(f),h.connect(l),h.start(0);var g=u;return g.name="Phaser",g._output=d,Object.defineProperties(g,{lfoFrequency:{get:function(){return h.frequency.value},set:function(e){h.frequency.value=e}},lfoGain:{get:function(){return l.gain.value},set:function(e){l.gain.value=e}},feedback:{get:function(){return a.gain.value},set:function(e){a.gain.value=e}}}),g}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/recorder.js":[function(e,t){"use strict";function n(e,t){var n=[],o=[],i=0,s=0,r=e.createGain(),c=e.createGain(),u=e.createScriptProcessor(4096,2,2);r.connect(u),u.connect(e.destination),u.connect(c);var a=r;a.name="Recorder",a._output=c,a.isRecording=!1;var h=function(){if(!n.length)return e.createBuffer(2,4096,e.sampleRate);var t=e.createBuffer(2,n.length,e.sampleRate);return t.getChannelData(0).set(n),t.getChannelData(1).set(o),t};return a.start=function(){n.length=0,o.length=0,i=e.currentTime,s=0,this.isRecording=!0},a.stop=function(){return s=e.currentTime,this.isRecording=!1,h()},a.getDuration=function(){return this.isRecording?e.currentTime-i:s-i},u.onaudioprocess=function(e){var i=e.inputBuffer.getChannelData(0),s=e.inputBuffer.getChannelData(0),r=e.outputBuffer.getChannelData(0),c=e.outputBuffer.getChannelData(0);if(t&&(r.set(i),c.set(s)),a.isRecording)for(var u=0;u<i.length;u++)n.push(i[u]),o.push(s[u])},a}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect/reverb.js":[function(e,t){"use strict";function n(e,t){t=t||{};var n,o,i=t.time||1,s=t.decay||5,r=!!t.reverse,c=e.sampleRate,u=e.createGain(),a=e.createConvolver(),h=e.createGain();u.connect(a),u.connect(h),a.connect(h);var l=u;return l.name="Reverb",l._output=h,l.update=function(t){void 0!==t.time&&(i=t.time,n=c*i,o=e.createBuffer(2,n,c)),void 0!==t.decay&&(s=t.decay),void 0!==t.reverse&&(r=t.reverse);for(var u,h,l=o.getChannelData(0),d=o.getChannelData(1),p=0;n>p;p++)u=r?n-p:p,h=Math.pow(1-u/n,s),l[p]=(2*Math.random()-1)*h,d[p]=(2*Math.random()-1)*h;a.buffer=o},l.update({time:i,decay:s,reverse:r}),Object.defineProperties(l,{time:{get:function(){return i},set:function(e){e!==i&&this.update({time:i})}},decay:{get:function(){return s},set:function(e){e!==s&&this.update({decay:s})}},reverse:{get:function(){return r},set:function(e){e!==r&&this.update({reverse:!!e})}}}),l}t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/group.js":[function(e,t){"use strict";function n(e,t){this._sounds=[],this._context=e,this._effect=new o(this._context),this._gain=this._effect.gain(),this._context&&(this._effect.setSource(this._gain),this._effect.setDestination(t||this._context.destination))}var o=e("./effect.js");n.prototype.add=function(e){e.gain.disconnect(),e.gain.connect(this._gain),this._sounds.push(e)},n.prototype.remove=function(e){this._sounds.some(function(t,n,o){return t===e||t.id===e?(o.splice(n,1),!0):void 0})},n.prototype.play=function(e,t){this._sounds.forEach(function(n){n.play(e,t)})},n.prototype.pause=function(){this._sounds.forEach(function(e){e.playing&&e.pause()})},n.prototype.resume=function(){this._sounds.forEach(function(e){e.paused&&e.play()})},n.prototype.stop=function(){this._sounds.forEach(function(e){e.stop()})},n.prototype.seek=function(e){this._sounds.forEach(function(t){t.seek(e)})},n.prototype.mute=function(){this._preMuteVolume=this.volume,this.volume=0},n.prototype.unMute=function(){this.volume=this._preMuteVolume||1},Object.defineProperty(n.prototype,"volume",{get:function(){return this._gain.gain.value},set:function(e){isNaN(e)||(this._context?(this._gain.gain.cancelScheduledValues(this._context.currentTime),this._gain.gain.value=e,this._gain.gain.setValueAtTime(e,this._context.currentTime)):this._gain.gain.value=e,this._sounds.forEach(function(t){t.context||(t.volume=e)}))}}),n.prototype.fade=function(e,t){if(this._context){var n=this._gain.gain,o=this._context.currentTime;n.cancelScheduledValues(o),n.setValueAtTime(n.value,o),n.linearRampToValueAtTime(e,o+t)}else this._sounds.forEach(function(n){n.fade(e,t)});return this},n.prototype.destroy=function(){for(;this._sounds.length;)this._sounds.pop().destroy()},Object.defineProperties(n.prototype,{effect:{get:function(){return this._effect}},gain:{get:function(){return this._gain}},sounds:{get:function(){return this._sounds}}}),t.exports=n},{"./effect.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/sound.js":[function(e,t){"use strict";function n(e,t){this.id="",this._context=e,this._data=null,this._isTouchLocked=!1,this._loader=null,this._loop=!1,this._pausedAt=0,this._playbackRate=1,this._playWhenReady=null,this._source=null,this._startedAt=0,this._effect=new i(this._context),this._gain=this._effect.gain(),this._context&&(this._effect.setDestination(this._gain),this._gain.connect(t||this._context.destination))}var o=e("./source/buffer-source.js"),i=e("./effect.js"),s=e("./utils/emitter.js"),r=e("./utils/file.js"),c=e("./utils/loader.js"),u=e("./source/media-source.js"),a=e("./source/microphone-source.js"),h=e("./source/oscillator-source.js"),l=e("./source/script-source.js");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.load=function(e){var t=r.getSupportedFile(e.url||e);if(this._source&&this._source._el)this._source.load(t);else{this._loader=this._loader||new c(t),this._loader.audioContext=e.asMediaElement?null:this._context,this._loader.isTouchLocked=this._isTouchLocked;var n=this;this._loader.once("loaded",function(e){n.data=e,n=null})}return this},n.prototype.play=function(e,t){return!this._source||this._isTouchLocked?(this._playWhenReady=function(){this.play(e,t)}.bind(this),this):(this._playWhenReady=null,this._effect.setSource(this._source.sourceNode),this._source.loop=this._loop,this._context||(this.volume=this._gain.gain.value),this._source.play(e,t),this)},n.prototype.pause=function(){return this._source?(this._source.pause(),this):this},n.prototype.stop=function(){return this._source?(this._source.stop(),this):this},n.prototype.seek=function(e){return this._source?(this.stop(),this.play(0,this._source.duration*e),this):this},n.prototype.fade=function(e,t){if(!this._source)return this;if(this._context){var n=this._gain.gain,o=this._context.currentTime;n.cancelScheduledValues(o),n.setValueAtTime(n.value,o),n.linearRampToValueAtTime(e,o+t)}else"function"==typeof this._source.fade&&this._source.fade(e,t);return this},n.prototype.destroy=function(){this._source&&this._source.destroy(),this._effect&&this._effect.destroy(),this._gain&&this._gain.disconnect(),this._gain=null,this._context=null,this._data=null,this.removeAllListeners("ended"),this._playWhenReady=null,this._source=null,this._effect=null,this._loader&&(this._loader.destroy(),this._loader=null)},n.prototype._createSource=function(e){if(r.isAudioBuffer(e))this._source=new o(e,this._context);else if(r.isMediaElement(e))this._source=new u(e,this._context);else if(r.isMediaStream(e))this._source=new a(e,this._context);else if(r.isOscillatorType(e))this._source=new h(e,this._context);else{if(!r.isScriptConfig(e))throw new Error("Cannot detect data type: "+e);this._source=new l(e,this._context)}this._effect.setSource(this._source.sourceNode),this._source.hasOwnProperty("_endedCallback")&&(this._source._endedCallback=function(){this.emit("ended")}.bind(this)),this._playWhenReady&&this._playWhenReady()},Object.defineProperties(n.prototype,{context:{get:function(){return this._context}},currentTime:{get:function(){return this._source?this._source.currentTime:0},set:function(e){this.stop(),this.play(0,e)}},data:{get:function(){return this._data},set:function(e){e&&(this._data=e,this._createSource(this._data))}},duration:{get:function(){return this._source?this._source.duration:0}},effect:{get:function(){return this._effect}},ended:{get:function(){return this._source?this._source.ended:!1}},frequency:{get:function(){return this._source?this._source.frequency:0},set:function(e){this._source&&(this._source.frequency=e)}},gain:{get:function(){return this._gain}},isTouchLocked:{set:function(e){this._isTouchLocked=e,!e&&this._playWhenReady&&this._playWhenReady()}},loader:{get:function(){return this._loader}},loop:{get:function(){return this._loop},set:function(e){this._loop=!!e,this._source&&(this._source.loop=this._loop)}},paused:{get:function(){return this._source?this._source.paused:!1}},playing:{get:function(){return this._source?this._source.playing:!1}},playbackRate:{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._source&&(this._source.playbackRate=this._playbackRate)}},progress:{get:function(){return this._source?this._source.progress:0}},volume:{get:function(){return this._context?this._gain.gain.value:this._data&&void 0!==this._data.volume?this._data.volume:1},set:function(e){if(!isNaN(e)){var t=this._gain.gain;if(this._context){var n=this._context.currentTime;t.cancelScheduledValues(n),t.value=e,t.setValueAtTime(e,n)}else t.value=e,this._source&&window.clearTimeout(this._source.fadeTimeout),this._data&&void 0!==this._data.volume&&(this._data.volume=e)}}}}),t.exports=n},{"./effect.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/effect.js","./source/buffer-source.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/buffer-source.js","./source/media-source.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/media-source.js","./source/microphone-source.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/microphone-source.js","./source/oscillator-source.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/oscillator-source.js","./source/script-source.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/script-source.js","./utils/emitter.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/emitter.js","./utils/file.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/file.js","./utils/loader.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/loader.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/buffer-source.js":[function(e,t){"use strict";
function n(e,t){this.id="",this._buffer=e,this._context=t,this._ended=!1,this._endedCallback=null,this._loop=!1,this._paused=!1,this._pausedAt=0,this._playbackRate=1,this._playing=!1,this._sourceNode=null,this._startedAt=0}n.prototype.play=function(e,t){if(!this._playing){for(void 0===e&&(e=0),e>0&&(e=this._context.currentTime+e),void 0===t&&(t=0),t>0&&(this._pausedAt=0),this._pausedAt>0&&(t=this._pausedAt);t>this.duration;)t%=this.duration;this.sourceNode.loop=this._loop,this.sourceNode.onended=this._endedHandler.bind(this),this.sourceNode.start(e,t),this.sourceNode.playbackRate.value=this._playbackRate,this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime-t,this._ended=!1,this._paused=!1,this._pausedAt=0,this._playing=!0}},n.prototype.pause=function(){var e=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=e,this._playing=!1,this._paused=!0},n.prototype.stop=function(){if(this._sourceNode){this._sourceNode.onended=null;try{this._sourceNode.disconnect(),this._sourceNode.stop(0)}catch(e){}this._sourceNode=null}this._paused=!1,this._pausedAt=0,this._playing=!1,this._startedAt=0},n.prototype._endedHandler=function(){this.stop(),this._ended=!0,"function"==typeof this._endedCallback&&this._endedCallback(this)},n.prototype.destroy=function(){this.stop(),this._buffer=null,this._context=null,this._endedCallback=null,this._sourceNode=null},Object.defineProperties(n.prototype,{currentTime:{get:function(){if(this._pausedAt)return this._pausedAt;if(this._startedAt){var e=this._context.currentTime-this._startedAt;return e>this.duration&&(e%=this.duration),e}return 0}},data:{set:function(e){this._buffer=e}},duration:{get:function(){return this._buffer?this._buffer.duration:0}},ended:{get:function(){return this._ended}},loop:{get:function(){return this._loop},set:function(e){this._loop=!!e}},paused:{get:function(){return this._paused}},playbackRate:{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._sourceNode&&(this._sourceNode.playbackRate.value=this._playbackRate)}},playing:{get:function(){return this._playing}},progress:{get:function(){return this.duration?this.currentTime/this.duration:0}},sourceNode:{get:function(){return this._sourceNode||(this._sourceNode=this._context.createBufferSource(),this._sourceNode.buffer=this._buffer),this._sourceNode}}}),t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/media-source.js":[function(e,t){"use strict";function n(e,t){this.id="",this._context=t,this._el=e,this._ended=!1,this._endedCallback=null,this._loop=!1,this._paused=!1,this._playbackRate=1,this._playing=!1,this._sourceNode=null}n.prototype.load=function(e){this._el.src=e,this._el.load(),this._ended=!1,this._paused=!1,this._playing=!1},n.prototype.play=function(e,t){clearTimeout(this._delayTimeout),this.playbackRate=this._playbackRate,t&&(this._el.currentTime=t),e?this._delayTimeout=setTimeout(this.play.bind(this),e):this._el.play(),this._ended=!1,this._paused=!1,this._playing=!0,this._el.removeEventListener("ended",this._endedHandlerBound),this._el.addEventListener("ended",this._endedHandlerBound,!1),this._el.readyState<4&&(this._el.removeEventListener("canplaythrough",this._readyHandlerBound),this._el.addEventListener("canplaythrough",this._readyHandlerBound,!1),this._el.load(),this._el.play())},n.prototype.pause=function(){clearTimeout(this._delayTimeout),this._el&&(this._el.pause(),this._playing=!1,this._paused=!0)},n.prototype.stop=function(){if(clearTimeout(this._delayTimeout),this._el){this._el.pause();try{this._el.currentTime=0,this._el.currentTime>0&&this._el.load()}catch(e){}this._playing=!1,this._paused=!1}},n.prototype.fade=function(e,t){if(!this._el)return this;if(this._context)return this;var n=function(e,t,o){var i=o._el;o.fadeTimeout=setTimeout(function(){return i.volume=i.volume+.2*(e-i.volume),Math.abs(i.volume-e)>.05?n(e,t,o):void(i.volume=e)},1e3*t)};return window.clearTimeout(this.fadeTimeout),n(e,t/10,this),this},n.prototype._endedHandler=function(){this._ended=!0,this._paused=!1,this._playing=!1,this._loop?(this._el.currentTime=0,this._el.currentTime>0&&this._el.load(),this.play()):"function"==typeof this._endedCallback&&this._endedCallback(this)},n.prototype._readyHandler=function(){this._el.removeEventListener("canplaythrough",this._readyHandlerBound),this._playing&&this._el.play()},n.prototype.destroy=function(){this._el.removeEventListener("ended",this._endedHandlerBound),this._el.removeEventListener("canplaythrough",this._readyHandlerBound),this.stop(),this._el=null,this._context=null,this._endedCallback=null,this._sourceNode=null},Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._el?this._el.currentTime:0}},data:{set:function(e){this._el=e}},duration:{get:function(){return this._el?this._el.duration:0}},ended:{get:function(){return this._ended}},loop:{get:function(){return this._loop},set:function(e){this._loop=!!e}},paused:{get:function(){return this._paused}},playbackRate:{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._el&&(this._el.playbackRate=this._playbackRate)}},playing:{get:function(){return this._playing}},progress:{get:function(){return this.duration?this.currentTime/this.duration:0}},sourceNode:{get:function(){return!this._sourceNode&&this._context&&(this._sourceNode=this._context.createMediaElementSource(this._el)),this._sourceNode}}}),t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/microphone-source.js":[function(e,t){"use strict";function n(e,t){this.id="",this._context=t,this._ended=!1,this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0,this._stream=e}n.prototype.play=function(e){void 0===e&&(e=0),e>0&&(e=this._context.currentTime+e),this.sourceNode.start(e),this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime,this._ended=!1,this._playing=!0,this._paused=!1,this._pausedAt=0},n.prototype.pause=function(){var e=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=e,this._playing=!1,this._paused=!0},n.prototype.stop=function(){if(this._sourceNode){try{this._sourceNode.stop(0)}catch(e){}this._sourceNode=null}this._ended=!0,this._paused=!1,this._pausedAt=0,this._playing=!1,this._startedAt=0},n.prototype.destroy=function(){this.stop(),this._context=null,this._sourceNode=null,this._stream=null,window.mozHack=null},Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}},duration:{get:function(){return 0}},ended:{get:function(){return this._ended}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._sourceNode&&(this._sourceNode.frequency.value=e)}},paused:{get:function(){return this._paused}},playing:{get:function(){return this._playing}},progress:{get:function(){return 0}},sourceNode:{get:function(){return this._sourceNode||(this._sourceNode=this._context.createMediaStreamSource(this._stream),navigator.mozGetUserMedia&&(window.mozHack=this._sourceNode)),this._sourceNode}}}),t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/oscillator-source.js":[function(e,t){"use strict";function n(e,t){this.id="",this._context=t,this._ended=!1,this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0,this._type=e,this._frequency=200}n.prototype.play=function(e){void 0===e&&(e=0),e>0&&(e=this._context.currentTime+e),this.sourceNode.start(e),this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime,this._ended=!1,this._playing=!0,this._paused=!1,this._pausedAt=0},n.prototype.pause=function(){var e=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=e,this._playing=!1,this._paused=!0},n.prototype.stop=function(){if(this._sourceNode){try{this._sourceNode.stop(0)}catch(e){}this._sourceNode=null}this._ended=!0,this._paused=!1,this._pausedAt=0,this._playing=!1,this._startedAt=0},n.prototype.destroy=function(){this.stop(),this._context=null,this._sourceNode=null},Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}},duration:{get:function(){return 0}},ended:{get:function(){return this._ended}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._sourceNode&&(this._sourceNode.frequency.value=e)}},paused:{get:function(){return this._paused}},playing:{get:function(){return this._playing}},progress:{get:function(){return 0}},sourceNode:{get:function(){return!this._sourceNode&&this._context&&(this._sourceNode=this._context.createOscillator(),this._sourceNode.type=this._type,this._sourceNode.frequency.value=this._frequency),this._sourceNode}}}),t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/source/script-source.js":[function(e,t){"use strict";function n(e,t){this.id="",this._bufferSize=e.bufferSize||1024,this._channels=e.channels||1,this._context=t,this._ended=!1,this._onProcess=e.callback.bind(e.thisArg||this),this._paused=!1,this._pausedAt=0,this._playing=!1,this._sourceNode=null,this._startedAt=0}n.prototype.play=function(e){void 0===e&&(e=0),e>0&&(e=this._context.currentTime+e),this.sourceNode.onaudioprocess=this._onProcess,this._startedAt=this._pausedAt?this._context.currentTime-this._pausedAt:this._context.currentTime,this._ended=!1,this._paused=!1,this._pausedAt=0,this._playing=!0},n.prototype.pause=function(){var e=this._context.currentTime-this._startedAt;this.stop(),this._pausedAt=e,this._playing=!1,this._paused=!0},n.prototype.stop=function(){this._sourceNode&&(this._sourceNode.onaudioprocess=this._onPaused),this._ended=!0,this._paused=!1,this._pausedAt=0,this._playing=!1,this._startedAt=0},n.prototype._onPaused=function(e){for(var t=e.outputBuffer,n=0,o=t.numberOfChannels;o>n;n++)for(var i=t.getChannelData(n),s=0,r=i.length;r>s;s++)i[s]=0},n.prototype.destroy=function(){this.stop(),this._context=null,this._onProcess=null,this._sourceNode=null},Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._pausedAt?this._pausedAt:this._startedAt?this._context.currentTime-this._startedAt:0}},duration:{get:function(){return 0}},ended:{get:function(){return this._ended}},paused:{get:function(){return this._paused}},playing:{get:function(){return this._playing}},progress:{get:function(){return 0}},sourceNode:{get:function(){return!this._sourceNode&&this._context&&(this._sourceNode=this._context.createScriptProcessor(this._bufferSize,0,this._channels)),this._sourceNode}}}),t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/browser.js":[function(e,t){"use strict";var n={};n.handlePageVisibility=function(e,t,n){function o(){document[i]?e.call(n):t.call(n)}var i,s;"undefined"!=typeof document.hidden?(i="hidden",s="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",s="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",s="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",s="webkitvisibilitychange"),void 0!==s&&document.addEventListener(s,o,!1)},n.handleTouchLock=function(e,t){var n=navigator.userAgent,o=!!n.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i),i=function(){if(document.body.removeEventListener("touchstart",i),this._context){var n=this._context.createBuffer(1,1,22050),o=this._context.createBufferSource();o.buffer=n,o.connect(this._context.destination),o.start(0)}e.call(t)}.bind(this);return o&&document.body.addEventListener("touchstart",i,!1),o},t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/emitter.js":[function(e,t){"use strict";function n(){}var o=e("events").EventEmitter;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.off=function(e,t){return t?this.removeListener(e,t):this.removeAllListeners(e)},t.exports=n},{events:"/Users/ianmcgregor/Dropbox/workspace/sono/node_modules/browserify/node_modules/events/events.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/file.js":[function(e,t){"use strict";var n={extensions:[],canPlay:{}},o=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],i=document.createElement("audio");i&&o.forEach(function(e){var t=!!i.canPlayType(e.type);t&&n.extensions.push(e.ext),n.canPlay[e.ext]=t}),n.getFileExtension=function(e){if("data:"===e.substr(0,5)){var t=e.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(t&&t.length>1)return t[1].toLowerCase()}e=e.split("?")[0],e=e.substr(e.lastIndexOf("/")+1);var n=e.split(".");return 1===n.length||""===n[0]&&2===n.length?"":n.pop().toLowerCase()},n.getSupportedFile=function(e){var t;return Array.isArray(e)?e.some(function(e){t=e;var n=this.getFileExtension(e);return this.extensions.indexOf(n)>-1},this):"object"==typeof e&&Object.keys(e).some(function(n){t=e[n];var o=this.getFileExtension(t);return this.extensions.indexOf(o)>-1},this),t||e},n.isAudioBuffer=function(e){return!!(e&&window.AudioBuffer&&e instanceof window.AudioBuffer)},n.isMediaElement=function(e){return!!(e&&window.HTMLMediaElement&&e instanceof window.HTMLMediaElement)},n.isMediaStream=function(e){return!!(e&&"function"==typeof e.getAudioTracks&&e.getAudioTracks().length&&window.MediaStreamTrack&&e.getAudioTracks()[0]instanceof window.MediaStreamTrack)},n.isOscillatorType=function(e){return!(!e||"string"!=typeof e||"sine"!==e&&"square"!==e&&"sawtooth"!==e&&"triangle"!==e)},n.isScriptConfig=function(e){return!!(e&&"object"==typeof e&&e.bufferSize&&e.channels&&e.callback)},n.isURL=function(e){return!(!e||"string"!=typeof e||!(e.indexOf(".")>-1||"data:"===e.substr(0,5)))},n.containsURL=function(e){if(!e)return!1;var t=e.url||e;return this.isURL(t)||Array.isArray(t)&&this.isURL(t[0])},t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/loader.js":[function(e,t){"use strict";function n(e){var t,n,i,s,r,c=new o,u=0,a=function(){t?l():d()},h=function(e){c.emit("progress",1),c.emit("loaded",e),c.emit("complete",e)},l=function(){i=new XMLHttpRequest,i.open("GET",e,!0),i.responseType="arraybuffer",i.onprogress=function(e){e.lengthComputable&&(u=e.loaded/e.total,c.emit("progress",u))},i.onload=function(){t.decodeAudioData(i.response,function(e){r=e,i=null,u=1,h(e)},function(e){c.emit("error",e)})},i.onerror=function(e){c.emit("error",e)},i.send()},d=function(){r&&r.tagName||(r=new Audio),n||(window.clearTimeout(s),s=window.setTimeout(f,2e3),r.addEventListener("canplaythrough",f,!1)),r.addEventListener("error",p,!1),r.preload="auto",r.src=e,r.load(),n&&h(r)},p=function(e){window.clearTimeout(s),c.emit("error",e)},f=function(){window.clearTimeout(s),r&&(r.removeEventListener("canplaythrough",f),u=1,h(r))},_=function(){i&&4!==i.readyState&&i.abort(),r&&"function"==typeof r.removeEventListener&&r.removeEventListener("canplaythrough",f),window.clearTimeout(s),c.removeAllListeners("progress"),c.removeAllListeners("complete"),c.removeAllListeners("loaded"),c.removeAllListeners("error")},g=function(){_(),i=null,r=null,t=null},y=function(t){e=t,a()},v={on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),load:y,start:a,cancel:_,destroy:g};return Object.defineProperties(v,{data:{get:function(){return r}},progress:{get:function(){return u}},audioContext:{set:function(e){t=e}},isTouchLocked:{set:function(e){n=e}}}),Object.freeze(v)}var o=e("./emitter.js");n.Group=function(){var e=new o,t=[],n=0,i=0,s=function(e){return t.push(e),i++,e},r=function(){i=t.length,c()},c=function(){if(0===t.length)return void e.emit("complete");var n=t.pop();n.on("progress",u),n.on("loaded",a),n.on("error",h),n.start()},u=function(t){var o=n+t;e.emit("progress",o/i)},a=function(){n++,e.emit("progress",n/i),c()},h=function(t){e.emit("error",t),c()};return Object.freeze({on:e.on.bind(e),once:e.once.bind(e),off:e.off.bind(e),add:s,start:r})},t.exports=n},{"./emitter.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/emitter.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/microphone.js":[function(e,t){"use strict";function n(e,t,n,o){navigator.getUserMedia_=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,this._isSupported=!!navigator.getUserMedia_,this._stream=null,this._onConnected=e.bind(o||this),this._onDenied=t?t.bind(o||this):function(){},this._onError=n?n.bind(o||this):function(){}}n.prototype.connect=function(){if(this._isSupported){var e=this;return navigator.getUserMedia_({audio:!0},function(t){e._stream=t,e._onConnected(t)},function(t){"PermissionDeniedError"===t.name||"PERMISSION_DENIED"===t?e._onDenied():e._onError(t.message||t)}),this}},n.prototype.disconnect=function(){return this._stream&&(this._stream.stop(),this._stream=null),this},Object.defineProperties(n.prototype,{stream:{get:function(){return this._stream}},isSupported:{get:function(){return this._isSupported}}}),t.exports=n},{}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/sound-group.js":[function(e,t){"use strict";function n(e,t){o.call(this,e,t),this._src=null}var o=e("../group.js");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.add=function(e){o.prototype.add.call(this,e),this._getSource()},n.prototype.remove=function(e){o.prototype.remove.call(this,e),this._getSource()},n.prototype._getSource=function(){this._sounds.length&&(this._sounds.sort(function(e,t){return t.duration-e.duration}),this._src=this._sounds[0])},Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._src?this._src.currentTime:0},set:function(e){this.stop(),this.play(0,e)}},duration:{get:function(){return this._src?this._src.duration:0}},loop:{get:function(){return this._loop},set:function(e){this._loop=!!e,this._sounds.forEach(function(e){e.loop=this._loop})}},paused:{get:function(){return this._src?this._src.paused:!1}},progress:{get:function(){return this._src?this._src.progress:0}},playbackRate:{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._sounds.forEach(function(e){e.playbackRate=this._playbackRate})}},playing:{get:function(){return this._src?this._src.playing:!1}}}),t.exports=n},{"../group.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/group.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/utils.js":[function(e,t){"use strict";var n=e("./microphone.js"),o=e("./waveform.js"),i={};i.setContext=function(e){this._context=e},i.cloneBuffer=function(e){if(!this._context)return e;for(var t=e.numberOfChannels,n=this._context.createBuffer(t,e.length,e.sampleRate),o=0;t>o;o++)n.getChannelData(o).set(e.getChannelData(o));return n},i.reverseBuffer=function(e){for(var t=e.numberOfChannels,n=0;t>n;n++)Array.prototype.reverse.call(e.getChannelData(n));return e},i.ramp=function(e,t,n,o){this._context&&(e.setValueAtTime(t,this._context.currentTime),e.linearRampToValueAtTime(n,this._context.currentTime+o))},i.getFrequency=function(e){if(!this._context)return 0;var t=40,n=this._context.sampleRate/2,o=Math.log(n/t)/Math.LN2,i=Math.pow(2,o*(e-1));return n*i},i.microphone=function(e,t,o,i){return new n(e,t,o,i)},i.timeCode=function(e,t){void 0===t&&(t=":");var n=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%3600%60),s=0===n?"":10>n?"0"+n+t:n+t,r=(10>o?"0"+o:o)+t,c=10>i?"0"+i:i;return s+r+c},i.waveform=function(e,t){return new o(e,t)},t.exports=i},{"./microphone.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/microphone.js","./waveform.js":"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/waveform.js"}],"/Users/ianmcgregor/Dropbox/workspace/sono/src/lib/utils/waveform.js":[function(e,t){"use strict";function n(){var e,t,n=function(n,o){if(!window.Float32Array||!window.AudioBuffer)return[];var i=n===e,s=t&&t.length===o;if(i&&s)return t;var r=new Float32Array(o),c=Math.floor(n.length/o),u=5,a=Math.floor(c/u),h=0;1>a&&(a=1);for(var l=0,d=n.numberOfChannels;d>l;l++)for(var p=n.getChannelData(l),f=0;o>f;f++)for(var _=f*c,g=_+c;g>_;_+=a){var y=p[_];0>y&&(y=-y),y>r[f]&&(r[f]=y),y>h&&(h=y)}var v=1/h,m=r.length;for(l=0;m>l;l++)r[l]*=v;return e=n,t=r,r},o=function(t){var n,o,i=t.canvas||document.createElement("canvas"),s=t.width||i.width,r=t.height||i.height,c=t.color||"#333333",u=t.bgColor||"#dddddd",a=t.sound?t.sound.data:t.buffer||e,h=this.compute(a,s),l=i.getContext("2d");l.strokeStyle=c,l.fillStyle=u,l.fillRect(0,0,s,r),l.beginPath();for(var d=0;d<h.length;d++)n=d+.5,o=r-Math.round(r*h[d]),l.moveTo(n,o),l.lineTo(n,r);return l.stroke(),i};return Object.freeze({compute:n,draw:o})}t.exports=n},{}]},{},["./src/sono.js"])("./src/sono.js")});