!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.sono=e()}}(function(){return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function u(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,c,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(u(n))for(i=Array.prototype.slice.call(arguments,1),s=n.slice(),r=s.length,c=0;r>c;c++)s[c].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){"use strict";function r(e){e=e||new a;var t,n,r,p=[],g=new f(e),m=function(e){return e?p.indexOf(e)>-1:!1},h=function(e){return e?m(e)?e:(p.push(e),O(),e):void 0},y=function(e){if(e){if(!m(e))return e;for(var t=p.length,n=0;t>n;n++)if(e===p[n]){p.splice(n,1);break}var r=e._output||e;return r.disconnect(),O(),e}},b=function(e,n){n=!!n;var r=m(e);return arguments.length>1&&r===n?t:(r?y(e):h(e),t)},w=function(){for(;p.length;)p.pop().disconnect();return O(),t},T=function(){w(),e=null,n=null,p=[],r&&r.disconnect(),r=null},x=function(e,t){var n=e._output||e;n.disconnect(),n.connect(t)},j=function(e){var t=p.length,o=t?p[t-1]:r;o&&x(o,e),n=e},O=function(){if(r){for(var e,t,o=0;o<p.length;o++)e=p[o],t=0===o?r:p[o-1],x(t,e);n&&j(n)}},E=function(t){return h(new o(e,t))},M=function(t){t=t||{};var n=e.createDynamicsCompressor();return n.update=function(e){n.threshold.value=void 0!==e.threshold?e.threshold:-24,n.knee.value=void 0!==e.knee?e.knee:30,n.ratio.value=void 0!==e.ratio?e.ratio:12,n.reduction.value=void 0!==e.reduction?e.reduction:-10,n.attack.value=void 0!==e.attack?e.attack:3e-4,n.release.value=void 0!==e.release?e.release:.25},n.update(t),h(n)},A=function(t){var n=e.createConvolver();return n.buffer=t,h(n)},L=function(t){var n=e.createDelay();return void 0!==t&&(n.delayTime.value=t),h(n)},k=function(t){return h(new u(e,t))},D=function(t){return h(new i(e,t))},C=function(t,n,r,o){return h(new c(e,t,n,r,o))},_=function(e,t){return C("lowpass",e,t)},P=function(e,t){return C("highpass",e,t)},S=function(e,t){return C("bandpass",e,t)},R=function(e,t){return C("lowshelf",e,0,t)},F=function(e,t){return C("highshelf",e,0,t)},z=function(e,t,n){return C("peaking",e,t,n)},q=function(e,t,n){return C("notch",e,t,n)},G=function(e,t){return C("allpass",e,t)},B=function(t){return h(new s(e,t))},V=function(t){var n=e.createGain();return void 0!==t&&(n.gain.value=t),n},N=function(){return h(new f(e))},U=function(t){return h(new l(e,t))},I=function(t){return h(new d(e,t))},H=function(t,n,r){return h(new v(e,t,n,r))},W=function(t){t=t||{};var n=t.bufferSize||1024,r=void 0===t.inputChannels?0:r,o=void 0===t.outputChannels?1:o,i=e.createScriptProcessor(n,r,o),u=t.thisArg||t.context||i,a=t.callback||function(){};return i.onaudioprocess=a.bind(u),h(i)},Q=function(e){return r=e,O(),e},X=function(e){return j(e),e};return t={context:e,nodeList:p,panning:g,has:m,add:h,remove:y,toggle:b,removeAll:w,destroy:T,setSource:Q,setDestination:X,analyser:E,compressor:M,convolver:A,delay:L,echo:k,distortion:D,filter:C,lowpass:_,highpass:P,bandpass:S,lowshelf:R,highshelf:F,peaking:z,notch:q,allpass:G,flanger:B,gain:V,panner:N,phaser:U,recorder:I,reverb:H,script:W},Object.freeze(t)}var o=e("./effect/analyser.js"),i=e("./effect/distortion.js"),u=e("./effect/echo.js"),a=e("./effect/fake-context.js"),c=e("./effect/filter.js"),s=e("./effect/flanger.js"),f=e("./effect/panner.js"),l=e("./effect/phaser.js"),d=e("./effect/recorder.js"),v=e("./effect/reverb.js");t.exports=r},{"./effect/analyser.js":3,"./effect/distortion.js":4,"./effect/echo.js":5,"./effect/fake-context.js":6,"./effect/filter.js":7,"./effect/flanger.js":8,"./effect/panner.js":9,"./effect/phaser.js":10,"./effect/recorder.js":11,"./effect/reverb.js":12}],3:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n,r,o=t.fftSize||512,i=!!t["float"],u=!!t["float"],a=e.createAnalyser();a.fftSize=o,a.smoothingTimeConstant=t.smoothing||t.smoothingTimeConstant||a.smoothingTimeConstant,a.minDecibels=t.minDecibels||a.minDecibels,a.maxDecibels=t.maxDecibels||a.maxDecibels;var c=function(e,t){return e?a.fftSize!==o?!0:t&&e instanceof Uint8Array?!0:!t&&e instanceof Float32Array:!0},s=function(e,t){return e?new Float32Array(t):new Uint8Array(t)};return a.getWaveform=function(e){return arguments.length||(e=u),c(n,e)&&(o=a.fftSize,u=e,n=s(e,o)),e?this.getFloatTimeDomainData(n):this.getByteTimeDomainData(n),n},a.getFrequencies=function(e){return arguments.length||(e=i),c(r,e)&&(o=a.fftSize,i=e,r=s(e,a.frequencyBinCount)),e?this.getFloatFrequencyData(r):this.getByteFrequencyData(r),r},a.update=function(){a.getWaveform(),a.getFrequencies()},Object.defineProperties(a,{smoothing:{get:function(){return a.smoothingTimeConstant},set:function(e){a.smoothingTimeConstant=e}}}),a}t.exports=r},{}],4:[function(e,t,n){"use strict";function r(e,t){t=o(t,1);var n=e.createWaveShaper(),r=new Float32Array(i);return n.update=function(e){if(t=e,0>=t)return t=0,void(this.curve=null);for(var n,o=100*e,u=Math.PI/180,a=0;i>a;a++)n=2*a/i-1,r[a]=(3+o)*n*20*u/(Math.PI+o*Math.abs(n));this.curve=r},Object.defineProperties(n,{amount:{get:function(){return t},set:function(e){this.update(e)}}}),void 0!==t&&n.update(t),n}var o=e("../utils/validify.js").number,i=22050;t.exports=r},{"../utils/validify.js":27}],5:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n=e.createGain(),r=e.createDelay(),i=e.createGain(),u=e.createGain();r.delayTime.value=o(t.delayTime,.5),i.gain.value=o(t.feedback,.5),n.connect(r),n.connect(u),r.connect(i),i.connect(r),i.connect(u);var a=n;return a.name="Echo",a._output=u,Object.defineProperties(a,{delay:{get:function(){return r.delayTime.value},set:function(e){r.delayTime.value=e}},feedback:{get:function(){return i.gain.value},set:function(e){i.gain.value=e}}}),a}var o=e("../utils/validify.js").number;t.exports=r},{"../utils/validify.js":27}],6:[function(e,t,n){"use strict";function r(){var e=Date.now(),t=function(){},n=function(){return{value:1,defaultValue:1,linearRampToValueAtTime:t,setValueAtTime:t,exponentialRampToValueAtTime:t,setTargetAtTime:t,setValueCurveAtTime:t,cancelScheduledValues:t}},r=function(){return{connect:t,disconnect:t,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:t,getByteFrequencyData:t,getFloatTimeDomainData:t,getFloatFrequencyData:t,gain:n(),panningModel:0,setPosition:t,setOrientation:t,setVelocity:t,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:n(),Q:n(),detune:n(),delayTime:n(),buffer:0,threshold:n(),knee:n(),ratio:n(),attack:n(),release:n(),reduction:n(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:t,copyToChannel:t,dopplerFactor:0,speedOfSound:0,start:t}};return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{createAnalyser:r,createBuffer:r,createBiquadFilter:r,createChannelMerger:r,createChannelSplitter:r,createDynamicsCompressor:r,createConvolver:r,createDelay:r,createGain:r,createOscillator:r,createPanner:r,createScriptProcessor:r,createWaveShaper:r,listener:r(),get currentTime(){return(Date.now()-e)/1e3}}}t.exports=r},{}],7:[function(e,t,n){"use strict";function r(e,t,n,r,o){var i=40,u=e.sampleRate/2,a=e.createBiquadFilter();a.type=t;var c=function(e){var t=Math.log(u/i)/Math.LN2,n=Math.pow(2,t*(e-1));return u*n};return a.set=function(e,t,n){return void 0!==e&&(a.frequency.value=e),void 0!==t&&(a.Q.value=t),void 0!==n&&(a.gain.value=n),a},a.setByPercent=function(e,t,n){return a.set(c(e),t,n)},a.set(n,r,o)}t.exports=r},{}],8:[function(e,t,n){"use strict";function r(e,t){var n=e.createGain(),r=e.createDelay(),o=e.createGain(),i=e.createOscillator(),a=e.createGain(),c=e.createGain();r.delayTime.value=u(t.delay,.005),o.gain.value=u(t.feedback,.5),i.type="sine",i.frequency.value=u(t.gain,.002),a.gain.value=u(t.frequency,.25),n.connect(c),n.connect(r),r.connect(c),r.connect(o),o.connect(n),i.connect(a),a.connect(r.delayTime),i.start(0);var s=n;return s.name="Flanger",s._output=c,Object.defineProperties(s,{delay:{get:function(){return r.delayTime.value},set:function(e){r.delayTime.value=e}},lfoFrequency:{get:function(){return i.frequency.value},set:function(e){i.frequency.value=e}},lfoGain:{get:function(){return a.gain.value},set:function(e){a.gain.value=e}},feedback:{get:function(){return o.gain.value},set:function(e){o.gain.value=e}}}),s}function o(e,t){var n=e.createGain(),r=e.createChannelSplitter(2),o=e.createChannelMerger(2),i=e.createGain(),a=e.createGain(),c=e.createOscillator(),s=e.createGain(),f=e.createGain(),l=e.createDelay(),d=e.createDelay(),v=e.createGain();i.gain.value=a.gain.value=u(t.feedback,.5),l.delayTime.value=d.delayTime.value=u(t.delay,.003),c.type="sine",c.frequency.value=u(t.frequency,.5),s.gain.value=u(t.gain,.005),f.gain.value=0-s.gain.value,n.connect(r),r.connect(l,0),r.connect(d,1),l.connect(i),d.connect(a),i.connect(d),a.connect(l),l.connect(o,0,0),d.connect(o,0,1),o.connect(v),n.connect(v),c.connect(s),c.connect(f),s.connect(l.delayTime),f.connect(d.delayTime),c.start(0);var p=n;return p.name="StereoFlanger",p._output=v,Object.defineProperties(p,{delay:{get:function(){return l.delayTime.value},set:function(e){l.delayTime.value=d.delayTime.value=e}},lfoFrequency:{get:function(){return c.frequency.value},set:function(e){c.frequency.value=e}},lfoGain:{get:function(){return s.gain.value},set:function(e){s.gain.value=f.gain.value=e}},feedback:{get:function(){return i.gain.value},set:function(e){i.gain.value=a.gain.value=e}}}),p}function i(e,t){return t=t||{},t.stereo?new o(e,t):new r(e,t)}var u=e("../utils/validify.js").number;t.exports=i},{"../utils/validify.js":27}],9:[function(e,t,n){"use strict";function r(e){var t=e.createPanner();t.panningModel=r.defaults.panningModel,t.distanceModel=r.defaults.distanceModel,t.refDistance=r.defaults.refDistance,t.maxDistance=r.defaults.maxDistance,t.rolloffFactor=r.defaults.rolloffFactor,t.coneInnerAngle=r.defaults.coneInnerAngle,t.coneOuterAngle=r.defaults.coneOuterAngle,t.coneOuterGain=r.defaults.coneOuterGain,t.setPosition(0,0,1),t.setOrientation(0,0,0);var n={pool:[],get:function(e,t,n){var r=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return void 0!==e&&isNaN(e)&&"x"in e&&"y"in e&&"z"in e?(r.x=o(e.x),r.y=o(e.y),r.z=o(e.z)):(r.x=o(e),r.y=o(t),r.z=o(n)),r},dispose:function(e){this.pool.push(e)}},i=n.get(0,1,0),u=Math.PI/4,a=Math.PI/2,c=function(e,t){var r=n.get(t.x,t.y,t.z);f(r,i),f(r,t),l(r),l(t),e.setOrientation(t.x,t.y,t.z,r.x,r.y,r.z),n.dispose(t),n.dispose(r)},s=function(e,t){e.setPosition(t.x,t.y,t.z),n.dispose(t)},f=function(e,t){var n=e.x,r=e.y,o=e.z,i=t.x,u=t.y,a=t.z;e.x=r*a-o*u,e.y=o*i-n*a,e.z=n*u-r*i},l=function(e){if(0===e.x&&0===e.y&&0===e.z)return e;var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),n=1/t;return e.x*=n,e.y*=n,e.z*=n,e};return t.set=function(e,r,o){var i=n.get(e,r,o);1===arguments.length&&i.x&&(e=i.x,e>1&&(e=1),-1>e&&(e=-1),e*=u,o=e+a,o>a&&(o=Math.PI-o),i.x=Math.sin(e),i.z=Math.sin(o)),s(t,i)},t.setSourcePosition=function(e,r,o){s(t,n.get(e,r,o))},t.setSourceOrientation=function(e,r,o){c(t,n.get(e,r,o))},t.setListenerPosition=function(t,r,o){s(e.listener,n.get(t,r,o))},t.setListenerOrientation=function(t,r,o){c(e.listener,n.get(t,r,o))},t.getDefaults=function(){return r.defaults},t.setDefaults=function(e){Object.keys(e).forEach(function(t){r.defaults[t]=e[t]})},t}var o=e("../utils/validify.js").number;r.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},t.exports=r},{"../utils/validify.js":27}],10:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n,r=o(t.stages,8),i=[],u=e.createGain(),a=e.createGain(),c=e.createOscillator(),s=e.createGain(),f=e.createGain();a.gain.value=o(t.feedback,.5),c.type="sine",c.frequency.value=o(t.frequency,.5),s.gain.value=o(t.gain,300);for(var l=0;r>l;l++)n=e.createBiquadFilter(),n.type="allpass",n.frequency.value=1e3*l,l>0&&i[l-1].connect(n),s.connect(n.frequency),i.push(n);var d=i[0],v=i[i.length-1];u.connect(d),u.connect(f),v.connect(f),v.connect(a),a.connect(d),c.connect(s),c.start(0);var p=u;return p.name="Phaser",p._output=f,Object.defineProperties(p,{lfoFrequency:{get:function(){return c.frequency.value},set:function(e){c.frequency.value=e}},lfoGain:{get:function(){return s.gain.value},set:function(e){s.gain.value=e}},feedback:{get:function(){return a.gain.value},set:function(e){a.gain.value=e}}}),p}var o=e("../utils/validify.js").number;t.exports=r},{"../utils/validify.js":27}],11:[function(e,t,n){"use strict";function r(e,t){var n,r=4096,o=[],i=[],u=0,a=0,c=e.createGain(),s=e.createGain(),f=c;f.name="Recorder",f._output=s,f.isRecording=!1;var l=function(){if(!o.length)return e.createBuffer(2,r,e.sampleRate);var t=o.length*r,n=e.createBuffer(2,t,e.sampleRate);return n.getChannelData(0).set(d(o,t)),n.getChannelData(1).set(d(i,t)),n},d=function(e,t){for(var n=new Float32Array(t),r=0,o=0;o<e.length;o++)n.set(e[o],r),r+=e[o].length;return n},v=function(){p(),n=e.createScriptProcessor(r,2,2),c.connect(n),n.connect(e.destination),n.connect(s),n.onaudioprocess=function(e){var n=e.inputBuffer.getChannelData(0),r=e.inputBuffer.getChannelData(1);if(t){var u=e.outputBuffer.getChannelData(0),a=e.outputBuffer.getChannelData(1);u.set(n),a.set(r)}f.isRecording&&(o.push(new Float32Array(n)),i.push(new Float32Array(r)))}},p=function(){n&&(n.onaudioprocess=null,c.disconnect(),n.disconnect())};return f.start=function(){v(),o.length=0,i.length=0,u=e.currentTime,a=0,this.isRecording=!0},f.stop=function(){return a=e.currentTime,this.isRecording=!1,p(),l()},f.getDuration=function(){return this.isRecording?e.currentTime-u:a-u},f}t.exports=r},{}],12:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n,r,i=o(t.time,1),u=o(t.decay,5),a=!!t.reverse,c=e.sampleRate,s=e.createGain(),f=e.createConvolver(),l=e.createGain();s.connect(f),s.connect(l),f.connect(l);var d=s;return d.name="Reverb",d._output=l,d.update=function(t){if(void 0!==t.time&&(i=t.time,n=Math.floor(c*i),r=n?e.createBuffer(2,n,c):null),void 0!==t.decay&&(u=t.decay),void 0!==t.reverse&&(a=t.reverse),!r)return void(f.buffer=null);for(var o,s,l=r.getChannelData(0),d=r.getChannelData(1),v=0;n>v;v++)o=a?n-v:v,s=Math.pow(1-o/n,u),l[v]=(2*Math.random()-1)*s,d[v]=(2*Math.random()-1)*s;f.buffer=r},d.update({time:i,decay:u,reverse:a}),Object.defineProperties(d,{time:{get:function(){return i},set:function(e){console.log.call(console,"1 set time:",e),e!==i&&this.update({time:e})}},decay:{get:function(){return u},set:function(e){e!==u&&this.update({decay:e})}},reverse:{get:function(){return a},set:function(e){e!==a&&this.update({reverse:!!e})}}}),d}var o=e("../utils/validify.js").number;t.exports=r},{"../utils/validify.js":27}],13:[function(e,t,n){"use strict";function r(e,t){var n,r=[],i=new o(e),u=i.gain(),a=1;e&&(i.setSource(u),i.setDestination(t||e.destination));var c=function(e){return e.gain.disconnect(),e.gain.connect(u),r.push(e),e.once("destroy",f),n},s=function(e,t){var n;return e||0===e?(r.some(function(t){return t===e||t.id===e?(n=t,!0):void 0}),n&&t&&t(n),n):n},f=function(e){return s(e,function(e){r.splice(r.indexOf(e),1)}),n},l=function(e,t){return r.forEach(function(n){n.play(e,t)}),n},d=function(){return r.forEach(function(e){e.playing&&e.pause()}),n},v=function(){return r.forEach(function(e){e.paused&&e.play()}),n},p=function(){return r.forEach(function(e){e.stop()}),n},g=function(e){return r.forEach(function(t){t.seek(e)}),n},m=function(){return a=n.volume,n.volume=0,n},h=function(){return n.volume=a||1,n},y=function(e){return n.volume=e,n},b=function(t,o){if(e){var i=u.gain,a=e.currentTime;i.cancelScheduledValues(a),i.setValueAtTime(i.value,a),i.linearRampToValueAtTime(t,a+o)}else r.forEach(function(e){e.fade(t,o)});return n},w=function(){for(;r.length;)r.pop().destroy()};return n={add:c,find:s,remove:f,play:l,pause:d,resume:v,stop:p,seek:g,setVolume:y,mute:m,unMute:h,fade:b,destroy:w},Object.defineProperties(n,{effect:{value:i},gain:{value:u},sounds:{value:r},volume:{get:function(){return u.gain.value},set:function(t){isNaN(t)||(e?(u.gain.cancelScheduledValues(e.currentTime),u.gain.value=t,u.gain.setValueAtTime(t,e.currentTime)):u.gain.value=t,r.forEach(function(e){e.context||(e.groupVolume=t)}))}}}),n}var o=e("./effect.js");t.exports=r},{"./effect.js":2}],14:[function(e,t,n){"use strict";function r(e,t){var n,p,g,m,h,y,b=new i(e),w=b.gain(),T=!1,x=!1,j=1;e&&(b.setDestination(w),w.connect(t||e.destination));var O=function(t){var n=a.getSupportedFile(t.src||t.url||t);return h&&p&&p.tagName?h.load(n):(g=g||new c(n),g.audioContext=t.asMediaElement?null:e,g.isTouchLocked=T,g.once("loaded",function(e){C(e),y.emit("loaded",y)})),y},E=function(t,n){return!h||T?(m=function(){h&&E(t,n)},y):(m=null,b.setSource(h.sourceNode),e||(y.volume=w.gain.value),h.play(t,n),h.hasOwnProperty("loop")&&(h.loop=x),y.emit("play",y),y)},M=function(){return h&&h.pause(),y.emit("pause",y),y},A=function(e){return h&&h.stop(e||0),y.emit("stop",y),y},L=function(e){return h&&(h.stop(),E(0,h.duration*e)),y},k=function(t,n){if(!h)return y;var r=w.gain;if(e){var o=e.currentTime;r.cancelScheduledValues(o),r.setValueAtTime(r.value,o),r.linearRampToValueAtTime(t,o+n)}else"function"==typeof h.fade&&(h.fade(t,n),r.value=t);return y},D=function(){h&&h.destroy(),b&&b.destroy(),w&&w.disconnect(),g&&g.destroy(),y.off("loaded"),y.off("ended"),w=null,e=null,p=null,m=null,h=null,b=null,g=null,y.emit("destroy",y),y.off("destroy")},C=function(t){if(p=t,a.isAudioBuffer(p))h=new o(p,e,function(){y.emit("ended")});else if(a.isMediaElement(p))h=new s(p,e,function(){y.emit("ended")});else if(a.isMediaStream(p))h=new f(p,e);else if(a.isOscillatorType(p&&p.type||p))h=new l(p.type||p,e);else{if(!a.isScriptConfig(p))throw new Error("Cannot detect data type: "+p);h=new d(p,e)}b.setSource(h.sourceNode),y.emit("ready",y),m&&m()};return y=Object.create(u.prototype,{_events:{value:{}},constructor:{value:r},play:{value:E},pause:{value:M},load:{value:O},seek:{value:L},stop:{value:A},fade:{value:k},destroy:{value:D},context:{value:e},currentTime:{get:function(){return h?h.currentTime:0},set:function(e){h&&h.stop(),E(0,e)}},data:{get:function(){return p},set:function(e){e&&C(e)}},duration:{get:function(){return h?h.duration:0}},effect:{value:b},ended:{get:function(){return!!h&&h.ended}},frequency:{get:function(){return h?h.frequency:0},set:function(e){h&&h.hasOwnProperty("frequency")&&(h.frequency=e)}},gain:{value:w},id:{get:function(){return n},set:function(e){n=e}},isTouchLocked:{set:function(e){T=e,g&&(g.isTouchLocked=e),!e&&m&&m()}},loader:{get:function(){return g}},loop:{get:function(){return x},set:function(e){x=!!e,h&&h.hasOwnProperty("loop")&&h.loop!==x&&(h.loop=x)}},paused:{get:function(){return!!h&&h.paused}},playing:{get:function(){return!!h&&h.playing}},playbackRate:{get:function(){return j},set:function(e){j=e,h&&(h.playbackRate=j)}},progress:{get:function(){return h?h.progress:0}},volume:{get:function(){return e?w.gain.value:h&&h.hasOwnProperty("volume")?h.volume:1},set:function(t){if(!isNaN(t)){var n=w.gain;if(e){var r=e.currentTime;n.cancelScheduledValues(r),n.value=t,n.setValueAtTime(t,r)}else n.value=t,h&&h.hasOwnProperty("volume")&&(h.volume=t)}}},groupVolume:{get:function(){return h.groupVolume},set:function(e){h&&h.hasOwnProperty("groupVolume")&&(h.groupVolume=e)}},waveform:{value:function(e){return p||y.once("ready",function(){v(p,e)}),v(p,e)}},userData:{value:{}}}),Object.freeze(y)}var o=e("./source/buffer-source.js"),i=e("./effect.js"),u=e("./utils/emitter.js"),a=e("./utils/file.js"),c=e("./utils/loader.js"),s=e("./source/media-source.js"),f=e("./source/microphone-source.js"),l=e("./source/oscillator-source.js"),d=e("./source/script-source.js"),v=e("./utils/waveform.js")();t.exports=r},{"./effect.js":2,"./source/buffer-source.js":15,"./source/media-source.js":16,"./source/microphone-source.js":17,"./source/oscillator-source.js":18,"./source/script-source.js":19,"./utils/emitter.js":21,"./utils/file.js":22,"./utils/loader.js":23,"./utils/waveform.js":28}],15:[function(e,t,n){"use strict";function r(e,t,n){var r=!1,o=n,i=!1,u=!1,a=0,c=1,s=!1,f=null,l=0,d={},v=function(){return!f&&t&&(f=t.createBufferSource(),f.buffer=e),f},p=function(e,n){if(!s){for(e=e?t.currentTime+e:0,n=n||0,n&&(a=0),a&&(n=a);n>d.duration;)n%=d.duration;v(),f.onended=h,f.start(e,n),f.loop=i,f.playbackRate.value=c,l=t.currentTime-n,r=!1,u=!1,a=0,s=!0}},g=function(){var e=t.currentTime-l;m(),a=e,s=!1,u=!0},m=function(){if(f){f.onended=null;try{f.disconnect(),f.stop(0)}catch(e){}f=null}u=!1,a=0,s=!1,l=0},h=function(){m(),r=!0,"function"==typeof o&&o(d)},y=function(){m(),e=null,t=null,o=null,f=null};return Object.defineProperties(d,{play:{value:p},pause:{value:g},stop:{value:m},destroy:{value:y},currentTime:{get:function(){if(a)return a;if(l){var e=t.currentTime-l;return e>d.duration&&(e%=d.duration),e}return 0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return r}},loop:{get:function(){return i},set:function(e){i=!!e,f&&(f.loop=i)}},paused:{get:function(){return u}},playbackRate:{get:function(){return c},set:function(e){c=e,f&&(f.playbackRate.value=c)}},playing:{get:function(){return s}},progress:{get:function(){return d.duration?d.currentTime/d.duration:0}},sourceNode:{get:function(){return v()}}}),Object.freeze(d)}t.exports=r},{}],16:[function(e,t,n){"use strict";function r(e,t,n){var r,o,i=!1,u=n,a=!1,c=!1,s=1,f=!1,l=null,d=1,v=1,p={},g=function(){return!l&&t&&(l=t.createMediaElementSource(e)),l},m=function(t){e.src=t,e.load(),i=!1,c=!1,f=!1},h=function(t,n){clearTimeout(r),e.volume=v*d,e.playbackRate=s,n&&(e.currentTime=n),t?r=setTimeout(h,t):e.play(),i=!1,c=!1,f=!0,e.removeEventListener("ended",x),e.addEventListener("ended",x,!1),e.readyState<4&&(e.removeEventListener("canplaythrough",y),e.addEventListener("canplaythrough",y,!1),e.load(),e.play())},y=function(){e.removeEventListener("canplaythrough",y),f&&e.play()},b=function(){clearTimeout(r),e&&(e.pause(),f=!1,c=!0)},w=function(){if(clearTimeout(r),e){e.pause();try{e.currentTime=0,e.currentTime>0&&e.load()}catch(t){}f=!1,c=!1}},T=function(e,n){function r(e,t){o=setTimeout(function(){return p.volume=p.volume+.2*(e-p.volume),Math.abs(p.volume-e)>.05?r(e,t):void(p.volume=e)},1e3*t)}return t?p:(window.clearTimeout(o),r(e,n/10),p)},x=function(){i=!0,c=!1,f=!1,a?(e.currentTime=0,e.currentTime>0&&e.load(),h()):"function"==typeof u&&u(p)},j=function(){e.removeEventListener("ended",x),e.removeEventListener("canplaythrough",y),w(),e=null,t=null,u=null,l=null};return Object.defineProperties(p,{play:{value:h},pause:{value:b},stop:{value:w},load:{value:m},fade:{value:T},destroy:{value:j},currentTime:{get:function(){return e?e.currentTime:0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return i}},loop:{get:function(){return a},set:function(e){a=!!e}},paused:{get:function(){return c}},playbackRate:{get:function(){return s},set:function(t){s=t,e&&(e.playbackRate=s)}},playing:{get:function(){return f}},progress:{get:function(){return e&&e.duration?e.currentTime/e.duration:0}},sourceNode:{get:function(){return g()}},volume:{get:function(){return v},set:function(t){window.clearTimeout(o),v=t,e&&(e.volume=v*d)}},groupVolume:{get:function(){return d},set:function(t){d=t,e&&(e.volume=v*d)}}}),Object.freeze(p)}t.exports=r},{}],17:[function(e,t,n){"use strict";function r(e,t){var n=!1,r=!1,o=0,i=!1,u=null,a=0,c=function(){return!u&&t&&(u=t.createMediaStreamSource(e),navigator.mozGetUserMedia&&(window.mozHack=u)),u},s=function(e){e=e?t.currentTime+e:0,c(),u.start(e),a=t.currentTime-o,n=!1,i=!0,r=!1,o=0},f=function(){var e=t.currentTime-a;l(),o=e,i=!1,r=!0},l=function(){if(u){try{u.stop(0)}catch(e){}u=null}n=!0,r=!1,o=0,i=!1,a=0},d=function(){l(),t=null,u=null,e=null,window.mozHack=null},v={play:s,pause:f,stop:l,destroy:d,duration:0,progress:0};return Object.defineProperties(v,{currentTime:{get:function(){return o?o:a?t.currentTime-a:0}},ended:{get:function(){return n}},paused:{get:function(){return r}},playing:{get:function(){return i}},sourceNode:{get:function(){return c()}}}),Object.freeze(v)}t.exports=r},{}],18:[function(e,t,n){"use strict";function r(e,t){var n,r=!1,o=!1,i=0,u=!1,a=null,c=0,s=200,f=function(){return!a&&t&&(a=t.createOscillator(),a.type=e,a.frequency.value=s),a},l=function(e){e=e||0,e&&(e=t.currentTime+e),f(),a.start(e),c=i?t.currentTime-i:t.currentTime,r=!1,u=!0,o=!1,i=0},d=function(){var e=t.currentTime-c;this.stop(),i=e,u=!1,o=!0},v=function(){if(a){try{a.stop(0)}catch(e){}a=null}r=!0,o=!1,i=0,u=!1,c=0},p=function(){this.stop(),t=null,a=null};return n={play:l,pause:d,stop:v,destroy:p},Object.defineProperties(n,{currentTime:{get:function(){return i?i:c?t.currentTime-c:0}},duration:{value:0},ended:{get:function(){return r}},frequency:{get:function(){return s},set:function(e){s=e,a&&(a.frequency.value=e)}},paused:{get:function(){return o}},playing:{get:function(){return u}},progress:{value:0},sourceNode:{get:function(){return f()}}}),Object.freeze(n)}t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e,t){var n,r=e.bufferSize||1024,o=e.channels||1,i=!1,u=e.callback.bind(e.thisArg||this),a=!1,c=0,s=!1,f=null,l=0,d=function(){return!f&&t&&(f=t.createScriptProcessor(r,0,o)),f},v=function(e){e=e?t.currentTime+e:0,d(),f.onaudioprocess=u,l=t.currentTime-c,i=!1,a=!1,c=0,s=!0},p=function(){var e=t.currentTime-l;this.stop(),c=e,s=!1,a=!0},g=function(){f&&(f.onaudioprocess=m),i=!0,a=!1,c=0,s=!1,l=0},m=function(e){for(var t=e.outputBuffer,n=0;n<t.numberOfChannels;n++)for(var r=t.getChannelData(n),o=0;o<r.length;o++)r[o]=0},h=function(){this.stop(),t=null,u=null,f=null};return n={play:v,pause:p,stop:g,destroy:h,duration:0,progress:0},Object.defineProperties(n,{currentTime:{get:function(){return c?c:l?t.currentTime-l:0}},ended:{get:function(){return i}},paused:{get:function(){return a}},playing:{get:function(){return s}},sourceNode:{get:function(){return d()}}}),Object.freeze(n)}t.exports=r},{}],20:[function(e,t,n){"use strict";var r={};r.handlePageVisibility=function(e,t){function n(){document[r]?e():t()}var r,o;"undefined"!=typeof document.hidden?(r="hidden",o="visibilitychange"):"undefined"!=typeof document.mozHidden?(r="mozHidden",o="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r="webkitHidden",o="webkitvisibilitychange"),void 0!==o&&document.addEventListener(o,n,!1)},r.handleTouchLock=function(e,t){var n=navigator.userAgent,r=!!n.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i),o=function(){if(document.body.removeEventListener("touchstart",o),e){var n=e.createBuffer(1,1,22050),r=e.createBufferSource();r.buffer=n,r.connect(e.destination),r.start(0),r.disconnect()}t()};return r&&document.body.addEventListener("touchstart",o,!1),r},t.exports=r},{}],21:[function(e,t,n){"use strict";function r(){o.call(this),this.setMaxListeners(20)}var o=e("events").EventEmitter;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.off=function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()},t.exports=r},{events:1}],22:[function(e,t,n){"use strict";var r={extensions:[],canPlay:{}},o=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],i=document.createElement("audio");i&&(o.forEach(function(e){var t=!!i.canPlayType(e.type);t&&-1===r.extensions.indexOf(e.ext)&&r.extensions.push(e.ext),r.canPlay[e.ext]=t}),i=null),r.getFileExtension=function(e){if("data:"===e.slice(0,5)){var t=e.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(t&&t.length>1)return t[1].toLowerCase()}e=e.split("?")[0],e=e.slice(e.lastIndexOf("/")+1);var n=e.split(".");return 1===n.length||""===n[0]&&2===n.length?"":n.pop().toLowerCase()},r.getSupportedFile=function(e){var t;return Array.isArray(e)?e.some(function(e){t=e;var n=this.getFileExtension(e);return this.extensions.indexOf(n)>-1},this):"object"==typeof e&&Object.keys(e).some(function(n){t=e[n];var r=this.getFileExtension(t);return this.extensions.indexOf(r)>-1},this),t||e},r.isAudioBuffer=function(e){
return!!(e&&window.AudioBuffer&&e instanceof window.AudioBuffer)},r.isMediaElement=function(e){return!!(e&&window.HTMLMediaElement&&e instanceof window.HTMLMediaElement)},r.isMediaStream=function(e){return!!(e&&"function"==typeof e.getAudioTracks&&e.getAudioTracks().length&&window.MediaStreamTrack&&e.getAudioTracks()[0]instanceof window.MediaStreamTrack)},r.isOscillatorType=function(e){return!(!e||"string"!=typeof e||"sine"!==e&&"square"!==e&&"sawtooth"!==e&&"triangle"!==e)},r.isScriptConfig=function(e){return!!(e&&"object"==typeof e&&e.bufferSize&&e.channels&&e.callback)},r.isURL=function(e){return!(!e||"string"!=typeof e||!(e.indexOf(".")>-1||"data:"===e.slice(0,5)))},r.containsURL=function(e){if(!e||this.isMediaElement(e))return!1;var t=e.src||e.url||e;return this.isURL(t)||Array.isArray(t)&&this.isURL(t[0])},t.exports=r},{}],23:[function(e,t,n){"use strict";function r(e){var t,n,r,i,u,a=new o,c=0,s=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"],f=function(){t?d():g()},l=function(e){a.emit("progress",1),a.emit("loaded",e),a.emit("complete",e),y()},d=function(){r=new XMLHttpRequest,r.open("GET",e,!0),r.responseType="arraybuffer",r.addEventListener("progress",v),r.addEventListener("load",p),r.addEventListener("error",h),r.send()},v=function(e){e.lengthComputable&&(c=e.loaded/e.total,a.emit("progress",c))},p=function(){t.decodeAudioData(r.response,function(e){u=e,r=null,c=1,l(e)},h)},g=function(){u&&u.tagName||(u=document.createElement("audio")),n||(window.clearTimeout(i),i=window.setTimeout(m,2e3),u.addEventListener("canplaythrough",m,!1)),u.addEventListener("error",h,!1),u.preload="auto",u.src=e,u.load(),n&&l(u)},m=function(){window.clearTimeout(i),u&&(c=1,l(u))},h=function(t){window.clearTimeout(i);var n=t;u&&u.error&&(n="Media Error: "+s[u.error.code]+" "+e),r&&(n="XHR Error: "+r.status+" "+r.statusText+" "+e),a.emit("error",n),y()},y=function(){a.off("error"),a.off("progress"),a.off("complete"),a.off("loaded"),u&&"function"==typeof u.removeEventListener&&(u.removeEventListener("canplaythrough",m),u.removeEventListener("error",h)),r&&(r.removeEventListener("progress",v),r.removeEventListener("load",p),r.removeEventListener("error",h))},b=function(){y(),r&&4!==r.readyState&&r.abort(),r=null,window.clearTimeout(i)},w=function(){b(),r=null,u=null,t=null},T=function(t){e=t,f()},x={on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),load:T,start:f,cancel:b,destroy:w};return Object.defineProperties(x,{data:{get:function(){return u}},progress:{get:function(){return c}},audioContext:{set:function(e){t=e}},isTouchLocked:{set:function(e){n=e}}}),Object.freeze(x)}var o=e("./emitter.js");r.Group=function(){var e,t=new o,n=[],r=0,i=0,u=function(e){return n.push(e),i++,e},a=function(){i=n.length,c()},c=function(){return 0===n.length?(e=null,void t.emit("complete")):(e=n.pop(),e.on("progress",s),e.once("loaded",f),e.once("error",l),void e.start())},s=function(e){var n=r+e;t.emit("progress",n/i)},f=function(){r++,d(),t.emit("progress",r/i),c()},l=function(e){console.error.call(console,e),d(),t.emit("error",e),c()},d=function(){e.off("progress",s),e.off("loaded",f),e.off("error",l)};return Object.freeze({on:t.on.bind(t),once:t.once.bind(t),off:t.off.bind(t),add:u,start:a})},t.exports=r},{"./emitter.js":21}],24:[function(e,t,n){"use strict";function r(e,t,n){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,n=n||function(){};var r=!!navigator.getUserMedia,o=null,i={},u=function(){return r?(navigator.getUserMedia({audio:!0},function(t){o=t,e(o)},function(e){t&&"PermissionDeniedError"===e.name||"PERMISSION_DENIED"===e?t():n(e.message||e)}),i):void 0},a=function(){return o&&(o.stop(),o=null),i};return Object.defineProperties(i,{connect:{value:u},disconnect:{value:a},isSupported:{value:r},stream:{get:function(){return o}}}),Object.freeze(i)}t.exports=r},{}],25:[function(e,t,n){"use strict";function r(e,t){var n,r=new o(e,t),i=r.sounds,u=1,a=!1,c=function(){i.length&&(n=i.slice(0).sort(function(e,t){return t.duration-e.duration})[0])},s=r.add;r.add=function(e){return s(e),c(),r};var f=r.rmeove;return r.remove=function(e){return f(e),c(),r},Object.defineProperties(r,{currentTime:{get:function(){return n?n.currentTime:0},set:function(e){this.stop(),this.play(0,e)}},duration:{get:function(){return n?n.duration:0}},loop:{get:function(){return a},set:function(e){a=!!e,i.forEach(function(e){e.loop=a})}},paused:{get:function(){return!!n&&n.paused}},progress:{get:function(){return n?n.progress:0}},playbackRate:{get:function(){return u},set:function(e){u=e,i.forEach(function(e){e.playbackRate=u})}},playing:{get:function(){return!!n&&n.playing}}}),r}var o=e("../group.js");t.exports=r},{"../group.js":13}],26:[function(e,t,n){"use strict";var r,o=e("./microphone.js"),i=e("./waveformer.js"),u=function(e){r=e},a=function(e){if(!r)return e;for(var t=e.numberOfChannels,n=r.createBuffer(t,e.length,e.sampleRate),o=0;t>o;o++)n.getChannelData(o).set(e.getChannelData(o));return n},c=function(e){for(var t=e.numberOfChannels,n=0;t>n;n++)Array.prototype.reverse.call(e.getChannelData(n));return e},s=function(e,t,n,o,i){r&&(e.setValueAtTime(t,r.currentTime),i?e.linearRampToValueAtTime(n,r.currentTime+o):e.exponentialRampToValueAtTime(n,r.currentTime+o))},f=function(e){if(!r)return 0;var t=40,n=r.sampleRate/2,o=Math.log(n/t)/Math.LN2,i=Math.pow(2,o*(e-1));return n*i},l=function(e,t,n){return new o(e,t,n)},d=function(e,t){void 0===t&&(t=":");var n=Math.floor(e/3600),r=Math.floor(e%3600/60),o=Math.floor(e%3600%60),i=0===n?"":10>n?"0"+n+t:n+t,u=(10>r?"0"+r:r)+t,a=10>o?"0"+o:o;return i+u+a};t.exports=Object.freeze({setContext:u,cloneBuffer:a,reverseBuffer:c,ramp:s,getFrequency:f,microphone:l,timeCode:d,waveformer:i})},{"./microphone.js":24,"./waveformer.js":29}],27:[function(e,t,n){"use strict";t.exports=Object.freeze({number:function(e,t){return arguments.length<2&&(t=0),"number"!=typeof e||isNaN(e)?t:e}})},{}],28:[function(e,t,n){"use strict";function r(){var e,t;return function(n,r){if(!window.Float32Array||!window.AudioBuffer)return[];var o=e===n,i=t&&t.length===r;if(o&&i)return t;if(t&&t.length===r||(t=new Float32Array(r)),!n)return t;e=n;for(var u=Math.floor(e.length/r),a=5,c=Math.max(Math.floor(u/a),1),s=0,f=0;f<e.numberOfChannels;f++)for(var l=e.getChannelData(f),d=0;r>d;d++)for(var v=d*u,p=v+u;p>v;v+=c){var g=l[v];0>g&&(g=-g),g>t[d]&&(t[d]=g),g>s&&(s=g)}var m=1/s;for(f=0;f<t.length;f++)t[f]*=m;return t}}t.exports=r},{}],29:[function(e,t,n){"use strict";var r=Math.PI/2,o=2*Math.PI;t.exports=function(e){var t,n,i,u,a,c,s,f,l,d,v,p,g=e.style||"fill",m=e.shape||"linear",h=e.color||0,y=e.bgColor,b=e.lineWidth||1,w=e.percent||1,T=e.x||0,x=e.y||0,j=e.transform,O=e.canvas,E=e.width||O&&O.width,M=e.height||O&&O.height;O||e.context||(O=document.createElement("canvas"),E=E||O.width,M=M||O.height,O.width=M,O.height=M),"circular"===m&&(l=e.radius||Math.min(M/2,E/2),d=e.innerRadius||l/2,v=T+E/2,p=x+M/2),t=e.context||O.getContext("2d");var A=function(){y?(t.fillStyle=y,t.fillRect(T,x,E,M)):t.clearRect(T,x,E,M),t.lineWidth=b,n=null,"function"!=typeof h&&(t.strokeStyle=h,t.beginPath())},L=function(e,r,o){if("function"==typeof h){var i=h(e,r,o);i!==n&&(n=i,t.stroke(),t.strokeStyle=n,t.beginPath())}},k=function(e,t,n){return"function"==typeof j?j(e,t,n):e},D=function(t,n){return t&&"function"==typeof t.waveform?t.waveform(n):t?t:e.waveform?e.waveform:e.sound?e.sound.waveform(n):null},C=function(e){if(A(),"circular"===m){i=D(e,360),u=Math.floor(i.length*w);var n,h,y,j,O=o/u;for(a=0;u>a;a++)c=k(i[a],a,u),L(a,u,c),n=a*O-r,j=Math.cos(n),y=Math.sin(n),"fill"===g&&(s=v+d*j,f=p+d*y,t.moveTo(s,f)),h=d+(l-d)*c,s=v+h*j,f=p+h*y,"line"===g&&0===a&&t.moveTo(s,f),t.lineTo(s,f);"line"===g&&t.closePath()}else for(i=D(e,E),u=Math.min(i.length,E-b/2),u=Math.floor(u*w),a=0;u>a;a++)c=k(i[a],a,u),L(a,u,c),"line"===g&&a>0&&t.lineTo(s,f),s=T+a,f=x+M-Math.round(M*c),f=Math.floor(Math.min(f,x+M-b/2)),"fill"===g?(t.moveTo(s,f),t.lineTo(s,x+M)):t.lineTo(s,f);t.stroke()};return C.canvas=O,(e.waveform||e.sound)&&C(),C}},{}],30:[function(e,t,n){"use strict";function r(){var e,t="0.0.9",n=window.AudioContext||window.webkitAudioContext,r=n?new n:null,l=r?r.destination:null,d=new u(r,l);f.setContext(r);var v=function(e){if(i.containsURL(e))return y(e);var t=w(e);return t.data=e.data||e,t},p=function(t){return d.find(t,function(e){e.destroy()}),e},g=function(){return d.destroy(),e},m=function(e){return d.find(e)},h=function(e){var t=new s(r,d.gain);return e&&e.forEach(function(e){t.add(e)}),t},y=function(e){var t,n,r=e.src||e.url||e;if(i.containsURL(r))t=b(e),n=t.loader;else{if(!Array.isArray(r)||!i.containsURL(r[0].src||r[0].url)){var o="sono.load: No audio file URLs found in config.";if(!e.onError)throw new Error(o);return e.onError("[ERROR] "+o),null}t=[],n=new a.Group,r.forEach(function(e){t.push(b(e,n))})}return e.onProgress&&n.on("progress",function(t){e.onProgress(t)}),e.onComplete&&n.once("complete",function(){n.off("progress"),e.onComplete(t)}),n.once("error",function(t){n.off("error"),e.onError?e.onError(t):console.error.call(console,"[ERROR] sono.load: "+t)}),n.start(),t},b=function(e,t){var n=w(e).load(e);return t&&t.add(n.loader),n},w=function(e){var t=e&&e.webAudio===!1?null:r,n=new c(t,d.gain);return n.isTouchLocked=D,e&&(n.id=e.id||"",n.loop=!!e.loop,n.volume=e.volume),d.add(n),n},T=function(){return d.mute(),e},x=function(){return d.unMute(),e},j=function(t,n){return d.fade(t,n),e},O=function(){return d.pause(),e},E=function(){return d.resume(),e},M=function(){return d.stop(),e},A=function(t,n,r){return d.find(t,function(e){e.play(n,r)}),e},L=function(t){return d.find(t,function(e){e.pause()}),e},k=function(t){return d.find(t,function(e){e.stop()}),e},D=o.handleTouchLock(r,function(){D=!1,d.sounds.forEach(function(e){e.isTouchLocked=!1})});!function(){function e(){d.sounds.forEach(function(e){e.playing&&(e.pause(),n.push(e))})}function t(){for(;n.length;)n.pop().play()}var n=[];o.handlePageVisibility(e,t)}();var C=function(){var n="sono "+t,r="Supported:"+e.isSupported+" WebAudioAPI:"+e.hasWebAudio+" TouchLocked:"+D+" Extensions:"+i.extensions;if(navigator.userAgent.indexOf("Chrome")>-1){var o=["%c ♫ "+n+" ♫ %c "+r+" ","color: #FFFFFF; background: #379F7A","color: #1F1C0D; background: #E0FBAC"];console.log.apply(console,o)}else window.console&&window.console.log.call&&console.log.call(console,n+" "+r)};return e={createSound:v,destroySound:p,destroyAll:g,getSound:m,createGroup:h,load:y,mute:T,unMute:x,fade:j,pauseAll:O,resumeAll:E,stopAll:M,play:A,pause:L,stop:k,log:C,canPlay:i.canPlay,context:r,effect:d.effect,extensions:i.extensions,hasWebAudio:!!r,isSupported:i.extensions.length>0,gain:d.gain,utils:f,VERSION:t},Object.defineProperties(e,{isTouchLocked:{get:function(){return D}},sounds:{get:function(){return d.sounds.slice(0)}},volume:{get:function(){return d.volume},set:function(e){d.volume=e}}}),Object.freeze(e)}var o=e("./lib/utils/browser.js"),i=e("./lib/utils/file.js"),u=e("./lib/group.js"),a=e("./lib/utils/loader.js"),c=e("./lib/sound.js"),s=e("./lib/utils/sound-group.js"),f=e("./lib/utils/utils.js");t.exports=new r},{"./lib/group.js":13,"./lib/sound.js":14,"./lib/utils/browser.js":20,"./lib/utils/file.js":22,"./lib/utils/loader.js":23,"./lib/utils/sound-group.js":25,"./lib/utils/utils.js":26}]},{},[30])(30)});