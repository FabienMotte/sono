!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Sono=e()}}(function(){return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[u]={exports:{}};n[u][0].call(f.exports,function(e){var t=n[u][1][e];return o(t?t:e)},f,f.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n){"use strict";function t(){var e,n="0.0.8",t=window.AudioContext||window.webkitAudioContext,f=t?new t:null,l=f?f.destination:null,d=new i(f,l),v=d.gain,p=d.sounds;s.setContext(f);var g=function(e){if(o.containsURL(e))return T(e);var n=x(e);return n.data=e.data||e,n},h=function(n){return n?(p.some(function(e){return e===n||e.id===n?(e.destroy(),!0):void 0}),e):void 0},m=function(){return d.destroy(),e},y=function(e){var n;return p.some(function(t){return t.id===e?(n=t,!0):void 0}),n},w=function(e){var n=new c(f,v);return e&&e.forEach(function(e){n.add(e)}),n},T=function(n){if(!n)throw{name:"ArgumentException",message:"Sono.load: param config is undefined"};var t,r,i=n.onProgress,a=n.onComplete,c=n.onError,s=n.thisArg||n.context||e,f=n.url||n;if(o.containsURL(f))t=b(n),r=t.loader;else{if(!Array.isArray(f)||!o.containsURL(f[0].url))return null;t=[],r=new u.Group,f.forEach(function(e){t.push(b(e,r))})}return i&&r.on("progress",function(e){i.call(s,e)}),a&&r.once("complete",function(){r.off("progress"),a.call(s,t)}),r.once("error",function(e){r.off("error"),c?c.call(s,e):console.warn.call(console,e)}),r.start(),t},b=function(e,n){var t=x(e).load(e);return n&&n.add(t.loader),t},x=function(e){var n=e&&e.webAudio===!1?null:f,t=new a(n,v);return t.isTouchLocked=D,e&&(t.id=e.id||"",t.loop=!!e.loop,t.volume=e.volume),d.add(t),t},O=function(){return d.mute(),e},E=function(){return d.unMute(),e},L=function(n,t){return d.fade(n,t),e},A=function(){return d.pause(),e},_=function(){return d.resume(),e},k=function(){return d.stop(),e},M=function(n,t,r){return y(n).play(t,r),e},S=function(n){return y(n).pause(),e},C=function(n){return y(n).stop(),e},D=r.handleTouchLock(f,function(){D=!1,p.forEach(function(e){e.isTouchLocked=!1})});!function(){function e(){p.forEach(function(e){e.playing&&(e.pause(),t.push(e))})}function n(){for(;t.length;)t.pop().play()}var t=[];r.handlePageVisibility(e,n)}();var P=function(){var t="Sono "+n,r="Supported:"+e.isSupported+" WebAudioAPI:"+e.hasWebAudio+" TouchLocked:"+D+" Extensions:"+o.extensions;if(navigator.userAgent.indexOf("Chrome")>-1){var i=["%c ♫ "+t+" ♫ %c "+r+" ","color: #FFFFFF; background: #379F7A","color: #1F1C0D; background: #E0FBAC"];console.log.apply(console,i)}else window.console&&window.console.log.call&&console.log.call(console,t+" "+r)};return e={createSound:g,destroySound:h,destroyAll:m,getSound:y,createGroup:w,load:T,mute:O,unMute:E,fade:L,pauseAll:A,resumeAll:_,stopAll:k,play:M,pause:S,stop:C,log:P,canPlay:o.canPlay,context:f,effect:d.effect,extensions:o.extensions,hasWebAudio:!!f,isSupported:o.extensions.length>0,gain:v,utils:s,VERSION:n},Object.defineProperties(e,{isTouchLocked:{get:function(){return D}},sounds:{get:function(){return d.sounds.slice(0)}},volume:{get:function(){return d.volume},set:function(e){d.volume=e}}}),Object.freeze(e)}var r=e(21),o=e(23),i=e(14),u=e(24),a=e(15),c=e(26),s=e(27);n.exports=new t},{}],2:[function(e,n){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}n.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var n,t,o,a,c,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(n=arguments[1],n instanceof Error)throw n;throw TypeError('Uncaught, unspecified "error" event.')}if(t=this._events[e],u(t))return!1;if(r(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];t.apply(this,a)}else if(i(t)){for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];for(s=t.slice(),o=s.length,c=0;o>c;c++)s[c].apply(this,a)}return!0},t.prototype.addListener=function(e,n){var o;if(!r(n))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(n.listener)?n.listener:n),this._events[e]?i(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,i(this._events[e])&&!this._events[e].warned){var o;o=u(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,"function"==typeof console.trace)}return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,n){function t(){this.removeListener(e,t),o||(o=!0,n.apply(this,arguments))}if(!r(n))throw TypeError("listener must be a function");var o=!1;return t.listener=n,this.on(e,t),this},t.prototype.removeListener=function(e,n){var t,o,u,a;if(!r(n))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(t=this._events[e],u=t.length,o=-1,t===n||r(t.listener)&&t.listener===n)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,n);else if(i(t)){for(a=u;a-->0;)if(t[a]===n||t[a].listener&&t[a].listener===n){o=a;break}if(0>o)return this;1===t.length?(t.length=0,delete this._events[e]):t.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,n)}return this},t.prototype.removeAllListeners=function(e){var n,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[e],r(t))this.removeListener(e,t);else for(;t.length;)this.removeListener(e,t[t.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var n;return n=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.listenerCount=function(e,n){var t;return t=e._events&&e._events[n]?r(e._events[n])?1:e._events[n].length:0}},{}],3:[function(e,n){"use strict";function t(e){e=e||new u;var n,t,v,p=[],g=new s(e),h=function(e){return e?(p.push(e),x(),e):void 0},m=function(e){for(var n=p.length,t=0;n>t;t++)if(e===p[t]){p.splice(t,1);break}var r=e._output||e;return r.disconnect(),x(),e},y=function(){for(;p.length;)p.pop().disconnect();return x(),n},w=function(){y(),e=null,t=null,p=[],v&&v.disconnect(),v=null},T=function(e,n){var t=e._output||e;t.disconnect(),t.connect(n)},b=function(e){var n=p.length,r=n?p[n-1]:v;r&&T(r,e),t=e},x=function(){if(v){for(var e,n,r=0;r<p.length;r++)e=p[r],n=0===r?v:p[r-1],T(n,e);t&&b(t)}},O=function(n,t,o,i){var u=new r(e,n,t,o,i);return h(u)},E=function(n){n=n||{};var t=e.createDynamicsCompressor();return t.update=function(e){t.threshold.value=void 0!==e.threshold?e.threshold:-24,t.knee.value=void 0!==e.knee?e.knee:30,t.ratio.value=void 0!==e.ratio?e.ratio:12,t.reduction.value=void 0!==e.reduction?e.reduction:-10,t.attack.value=void 0!==e.attack?e.attack:3e-4,t.release.value=void 0!==e.release?e.release:.25},t.update(n),h(t)},L=function(n){var t=e.createConvolver();return t.buffer=n,h(t)},A=function(n){var t=e.createDelay();return void 0!==n&&(t.delayTime.value=n),h(t)},_=function(n,t){var r=new i(e,n,t);return h(r)},k=function(n){var t=new o(e,n);return h(t)},M=function(n,t,r,o){var i=new a(e,n,t,r,o);return h(i)},S=function(e,n,t){return M("lowpass",e,n,t)},C=function(e,n,t){return M("highpass",e,n,t)},D=function(e,n,t){return M("bandpass",e,n,t)},P=function(e,n,t){return M("lowshelf",e,n,t)},z=function(e,n,t){return M("highshelf",e,n,t)},R=function(e,n,t){return M("peaking",e,n,t)},q=function(e,n,t){return M("notch",e,n,t)},F=function(e,n,t){return M("allpass",e,n,t)},j=function(n){var t=new c(e,n);return h(t)},G=function(n){var t=e.createGain();return void 0!==n&&(t.gain.value=n),t},B=function(){var n=new s(e);return h(n)},N=function(n){var t=new f(e,n);return h(t)},V=function(n){var t=new l(e,n);return h(t)},U=function(n,t,r){var o=new d(e,n,t,r);return h(o)},I=function(n){n=n||{};var t=n.bufferSize||1024,r=void 0===n.inputChannels?0:r,o=void 0===n.outputChannels?1:o,i=e.createScriptProcessor(t,r,o),u=n.thisArg||n.context||i,a=n.callback||function(){};return i.onaudioprocess=a.bind(u),h(i)},H=function(e){return v=e,x(),e},W=function(e){return b(e),e};return n={context:e,nodeList:p,panning:g,add:h,remove:m,removeAll:y,destroy:w,setSource:H,setDestination:W,analyser:O,compressor:E,convolver:L,delay:A,echo:_,distortion:k,filter:M,lowpass:S,highpass:C,bandpass:D,lowshelf:P,highshelf:z,peaking:R,notch:q,allpass:F,flanger:j,gain:G,panner:B,phaser:N,recorder:V,reverb:U,script:I},Object.freeze(n)}var r=e(4),o=e(5),i=e(6),u=e(7),a=e(8),c=e(9),s=e(10),f=e(11),l=e(12),d=e(13);n.exports=t},{}],4:[function(e,n){"use strict";function t(e,n,t,r,o){n=n||32;var i,u,a=e.createAnalyser();a.fftSize=n,void 0!==t&&(a.smoothingTimeConstant=t),void 0!==r&&(a.minDecibels=r),void 0!==o&&(a.maxDecibels=o);var c=function(){(n!==a.fftSize||void 0===i)&&(i=new Uint8Array(a.fftSize),u=new Uint8Array(a.frequencyBinCount),n=a.fftSize)};return c(),a.getWaveform=function(){return c(),this.getByteTimeDomainData(i),i},a.getFrequencies=function(){return c(),this.getByteFrequencyData(u),u},Object.defineProperties(a,{smoothing:{get:function(){return a.smoothingTimeConstant},set:function(e){a.smoothingTimeConstant=e}}}),a}n.exports=t},{}],5:[function(e,n){"use strict";function t(e,n){n=n||1;var t=e.createWaveShaper();return t.update=function(e){n=e;for(var t,r=100*e,o=22050,i=new Float32Array(o),u=Math.PI/180,a=0;o>a;a++)t=2*a/o-1,i[a]=(3+r)*t*20*u/(Math.PI+r*Math.abs(t));this.curve=i},Object.defineProperties(t,{amount:{get:function(){return n},set:function(e){this.update(e)}}}),void 0!==n&&t.update(n),t}n.exports=t},{}],6:[function(e,n){"use strict";function t(e,n,t){var r=e.createGain(),o=e.createDelay(),i=e.createGain(),u=e.createGain();i.gain.value=t||.5,o.delayTime.value=n||.5,r.connect(o),r.connect(u),o.connect(i),i.connect(o),i.connect(u);var a=r;return a.name="Echo",a._output=u,Object.defineProperties(a,{delay:{get:function(){return o.delayTime.value},set:function(e){o.delayTime.value=e}},feedback:{get:function(){return i.gain.value},set:function(e){i.gain.value=e}}}),a}n.exports=t},{}],7:[function(e,n){"use strict";function t(){var e=Date.now(),n=function(){},t=function(){return{value:1,defaultValue:1,linearRampToValueAtTime:n,setValueAtTime:n,exponentialRampToValueAtTime:n,setTargetAtTime:n,setValueCurveAtTime:n,cancelScheduledValues:n}},r=function(){return{connect:n,disconnect:n,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:n,getByteFrequencyData:n,getFloatTimeDomainData:n,getFloatFrequencyData:n,gain:t(),panningModel:0,setPosition:n,setOrientation:n,setVelocity:n,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:t(),delayTime:t(),buffer:0,threshold:t(),knee:t(),ratio:t(),attack:t(),release:t(),reduction:t(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:n,copyToChannel:n,dopplerFactor:0,speedOfSound:0,start:n}};return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{createAnalyser:r,createBuffer:r,createBiquadFilter:r,createChannelMerger:r,createChannelSplitter:r,createDynamicsCompressor:r,createConvolver:r,createDelay:r,createGain:r,createOscillator:r,createPanner:r,createScriptProcessor:r,createWaveShaper:r,listener:r(),get currentTime(){return(Date.now()-e)/1e3}}}n.exports=t},{}],8:[function(e,n){"use strict";function t(e,n,t,r,o){var i=40,u=e.sampleRate/2,a=e.createBiquadFilter();a.type=n,void 0!==t&&(a.frequency.value=t),void 0!==r&&(a.Q.value=r),void 0!==o&&(a.gain.value=o);var c=function(e){var n=Math.log(u/i)/Math.LN2,t=Math.pow(2,n*(e-1));return u*t};return a.update=function(e,n){void 0!==e&&(this.frequency.value=e),void 0!==n&&(this.gain.value=n)},a.setByPercent=function(e,n,t){a.frequency.value=c(e),void 0!==n&&(a.Q.value=n),void 0!==t&&(a.gain.value=t)},a}n.exports=t},{}],9:[function(e,n){"use strict";function t(e,n){var t=n.feedback||.5,r=n.delay||.005,o=n.gain||.002,i=n.frequency||.25,u=e.createGain(),a=e.createDelay(),c=e.createGain(),s=e.createOscillator(),f=e.createGain(),l=e.createGain();a.delayTime.value=r,c.gain.value=t,s.type="sine",s.frequency.value=i,f.gain.value=o,u.connect(l),u.connect(a),a.connect(l),a.connect(c),c.connect(u),s.connect(f),f.connect(a.delayTime),s.start(0);var d=u;return d.name="Flanger",d._output=l,Object.defineProperties(d,{delay:{get:function(){return a.delayTime.value},set:function(e){a.delayTime.value=e}},lfoFrequency:{get:function(){return s.frequency.value},set:function(e){s.frequency.value=e}},lfoGain:{get:function(){return f.gain.value},set:function(e){f.gain.value=e}},feedback:{get:function(){return c.gain.value},set:function(e){c.gain.value=e}}}),d}function r(e,n){var t=n.feedback||.5,r=n.delay||.003,o=n.gain||.005,i=n.frequency||.5,u=e.createGain(),a=e.createChannelSplitter(2),c=e.createChannelMerger(2),s=e.createGain(),f=e.createGain(),l=e.createOscillator(),d=e.createGain(),v=e.createGain(),p=e.createDelay(),g=e.createDelay(),h=e.createGain();s.gain.value=f.gain.value=t,p.delayTime.value=g.delayTime.value=r,l.type="sine",l.frequency.value=i,d.gain.value=o,v.gain.value=0-o,u.connect(a),a.connect(p,0),a.connect(g,1),p.connect(s),g.connect(f),s.connect(g),f.connect(p),p.connect(c,0,0),g.connect(c,0,1),c.connect(h),u.connect(h),l.connect(d),l.connect(v),d.connect(p.delayTime),v.connect(g.delayTime),l.start(0);var m=u;return m.name="StereoFlanger",m._output=h,Object.defineProperties(m,{delay:{get:function(){return p.delayTime.value},set:function(e){p.delayTime.value=g.delayTime.value=e}},lfoFrequency:{get:function(){return l.frequency.value},set:function(e){l.frequency.value=e}},lfoGain:{get:function(){return d.gain.value},set:function(e){d.gain.value=v.gain.value=e}},feedback:{get:function(){return s.gain.value},set:function(e){s.gain.value=f.gain.value=e}}}),m}function o(e,n){return n=n||{},n.stereo?new r(e,n):new t(e,n)}n.exports=o},{}],10:[function(e,n){"use strict";function t(e){var n=e.createPanner();n.panningModel=t.defaults.panningModel,n.distanceModel=t.defaults.distanceModel,n.refDistance=t.defaults.refDistance,n.maxDistance=t.defaults.maxDistance,n.rolloffFactor=t.defaults.rolloffFactor,n.coneInnerAngle=t.defaults.coneInnerAngle,n.coneOuterAngle=t.defaults.coneOuterAngle,n.coneOuterGain=t.defaults.coneOuterGain,n.setPosition(0,0,0),n.setOrientation(0,0,0);var r={pool:[],get:function(e,n,t){var r=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return void 0!==e&&isNaN(e)&&"x"in e&&"y"in e&&"z"in e?(r.x=e.x||0,r.y=e.y||0,r.z=e.z||0):(r.x=e||0,r.y=n||0,r.z=t||0),r},dispose:function(e){this.pool.push(e)}},o=r.get(0,1,0),i=function(e,n){var t=r.get(n.x,n.y,n.z);c(t,o),c(t,n),s(t),s(n),e.setOrientation(n.x,n.y,n.z,t.x,t.y,t.z),r.dispose(n),r.dispose(t)},u=function(e,n){e.setPosition(n.x,n.y,n.z),r.dispose(n)},a=function(e,n){e.setVelocity(n.x,n.y,n.z),r.dispose(n)},c=function(e,n){var t=e.x,r=e.y,o=e.z,i=n.x,u=n.y,a=n.z;e.x=r*a-o*u,e.y=o*i-t*a,e.z=t*u-r*i},s=function(e){if(0===e.x&&0===e.y&&0===e.z)return e;var n=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),t=1/n;return e.x*=t,e.y*=t,e.z*=t,e};return n.setX=function(e){var t=Math.PI/4,r=2*t,o=e*t,i=o+r;i>r&&(i=Math.PI-i),o=Math.sin(o),i=Math.sin(i),n.setPosition(o,0,i)},n.setSourcePosition=function(e,t,o){u(n,r.get(e,t,o))},n.setSourceOrientation=function(e,t,o){i(n,r.get(e,t,o))},n.setSourceVelocity=function(e,t,o){a(n,r.get(e,t,o))},n.setListenerPosition=function(n,t,o){u(e.listener,r.get(n,t,o))},n.setListenerOrientation=function(n,t,o){i(e.listener,r.get(n,t,o))},n.setListenerVelocity=function(n,t,o){a(e.listener,r.get(n,t,o))},n.calculateVelocity=function(e,n,t){var o=e.x-n.x,i=e.y-n.y,u=e.z-n.z;return r.get(o/t,i/t,u/t)},n.setDefaults=function(e){Object.keys(e).forEach(function(n){t.defaults[n]=e[n]})},n}t.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},n.exports=t},{}],11:[function(e,n){"use strict";function t(e,n){n=n||{};var t,r=n.stages||8,o=n.frequency||.5,i=n.gain||300,u=n.feedback||.5,a=[],c=e.createGain(),s=e.createGain(),f=e.createOscillator(),l=e.createGain(),d=e.createGain();s.gain.value=u,f.type="sine",f.frequency.value=o,l.gain.value=i;for(var v=0;r>v;v++)t=e.createBiquadFilter(),t.type="allpass",t.frequency.value=1e3*v,v>0&&a[v-1].connect(t),l.connect(t.frequency),a.push(t);var p=a[0],g=a[a.length-1];c.connect(p),c.connect(d),g.connect(d),g.connect(s),s.connect(p),f.connect(l),f.start(0);var h=c;return h.name="Phaser",h._output=d,Object.defineProperties(h,{lfoFrequency:{get:function(){return f.frequency.value},set:function(e){f.frequency.value=e}},lfoGain:{get:function(){return l.gain.value},set:function(e){l.gain.value=e}},feedback:{get:function(){return s.gain.value},set:function(e){s.gain.value=e}}}),h}n.exports=t},{}],12:[function(e,n){"use strict";function t(e,n){var t=[],r=[],o=0,i=0,u=e.createGain(),a=e.createGain(),c=e.createScriptProcessor(4096,2,2);u.connect(c),c.connect(e.destination),c.connect(a);var s=u;s.name="Recorder",s._output=a,s.isRecording=!1;var f=function(){if(!t.length)return e.createBuffer(2,4096,e.sampleRate);var n=e.createBuffer(2,t.length,e.sampleRate);return n.getChannelData(0).set(t),n.getChannelData(1).set(r),n};return s.start=function(){t.length=0,r.length=0,o=e.currentTime,i=0,this.isRecording=!0},s.stop=function(){return i=e.currentTime,this.isRecording=!1,f()},s.getDuration=function(){return this.isRecording?e.currentTime-o:i-o},c.onaudioprocess=function(e){var o=e.inputBuffer.getChannelData(0),i=e.inputBuffer.getChannelData(0),u=e.outputBuffer.getChannelData(0),a=e.outputBuffer.getChannelData(0);if(n&&(u.set(o),a.set(i)),s.isRecording)for(var c=0;c<o.length;c++)t.push(o[c]),r.push(i[c])},s}n.exports=t},{}],13:[function(e,n){"use strict";function t(e,n){n=n||{};var t,r,o=n.time||1,i=n.decay||5,u=!!n.reverse,a=e.sampleRate,c=e.createGain(),s=e.createConvolver(),f=e.createGain();c.connect(s),c.connect(f),s.connect(f);var l=c;return l.name="Reverb",l._output=f,l.update=function(n){void 0!==n.time&&(o=n.time,t=a*o,r=e.createBuffer(2,t,a)),void 0!==n.decay&&(i=n.decay),void 0!==n.reverse&&(u=n.reverse);for(var c,f,l=r.getChannelData(0),d=r.getChannelData(1),v=0;t>v;v++)c=u?t-v:v,f=Math.pow(1-c/t,i),l[v]=(2*Math.random()-1)*f,d[v]=(2*Math.random()-1)*f;s.buffer=r},l.update({time:o,decay:i,reverse:u}),Object.defineProperties(l,{time:{get:function(){return o},set:function(e){e!==o&&this.update({time:o})}},decay:{get:function(){return i},set:function(e){e!==i&&this.update({decay:i})}},reverse:{get:function(){return u},set:function(e){e!==u&&this.update({reverse:!!e})}}}),l}n.exports=t},{}],14:[function(e,n){"use strict";function t(e,n){var t,o=[],i=new r(e),u=i.gain(),a=1;e&&(i.setSource(u),i.setDestination(n||e.destination));var c=function(e){e.gain.disconnect(),e.gain.connect(u),o.push(e),e.once("destroyed",s)},s=function(e){o.some(function(n,t,r){return n===e||n.id===e?(r.splice(t,1),!0):void 0})},f=function(e,n){o.forEach(function(t){t.play(e,n)})},l=function(){o.forEach(function(e){e.playing&&e.pause()})},d=function(){o.forEach(function(e){e.paused&&e.play()})},v=function(){o.forEach(function(e){e.stop()})},p=function(e){o.forEach(function(n){n.seek(e)})},g=function(){a=t.volume,t.volume=0},h=function(){t.volume=a||1},m=function(n,t){if(e){var r=u.gain,i=e.currentTime;r.cancelScheduledValues(i),r.setValueAtTime(r.value,i),r.linearRampToValueAtTime(n,i+t)}else o.forEach(function(e){e.fade(n,t)});return this},y=function(){for(;o.length;)o.pop().destroy()};return t={add:c,remove:s,play:f,pause:l,resume:d,stop:v,seek:p,mute:g,unMute:h,fade:m,destroy:y},Object.defineProperties(t,{effect:{value:i},gain:{value:u},sounds:{value:o},volume:{get:function(){return u.gain.value},set:function(n){isNaN(n)||(e?(u.gain.cancelScheduledValues(e.currentTime),u.gain.value=n,u.gain.setValueAtTime(n,e.currentTime)):u.gain.value=n,o.forEach(function(e){e.context||(e.volume=n)}))}}}),t}var r=e(3);n.exports=t},{}],15:[function(e,n){"use strict";function t(e,n){var d,v,p,g,h,m,y=new o(e),w=y.gain(),T=!1,b=!1,x=1;e&&(y.setDestination(w),w.connect(n||e.destination));var O=function(n){var t=u.getSupportedFile(n.url||n);return h&&v&&v.tagName?h.load(t):(p=p||new a(t),p.audioContext=n.asMediaElement?null:e,p.isTouchLocked=T,p.once("loaded",function(e){S(e),m.emit("loaded")})),m},E=function(n,t){return!h||T?(g=function(){h&&E(n,t)},m):(g=null,y.setSource(h.sourceNode),h.hasOwnProperty("loop")&&(h.loop=b),e||(m.volume=w.gain.value),h.play(n,t),m)},L=function(){return h?(h.pause(),m):m},A=function(){return h?(h.stop(),m):m},_=function(e){return h?(A(),E(0,h.duration*e),m):m},k=function(n,t){if(!h)return m;if(e){var r=w.gain,o=e.currentTime;r.cancelScheduledValues(o),r.setValueAtTime(r.value,o),r.linearRampToValueAtTime(n,o+t)}else"function"==typeof h.fade&&h.fade(n,t);return m},M=function(){h&&h.destroy(),y&&y.destroy(),w&&w.disconnect(),p&&p.destroy(),m.off("ended"),w=null,e=null,v=null,g=null,h=null,y=null,p=null,m.emit("destroyed",m),m.off("destroyed")},S=function(n){if(v=n,u.isAudioBuffer(v))h=new r(v,e,function(){m.emit("ended")});else if(u.isMediaElement(v))h=new c(v,e,function(){m.emit("ended")});else if(u.isMediaStream(v))h=new s(v,e);else if(u.isOscillatorType(v&&v.type||v))h=new f(v.type||v,e);else{if(!u.isScriptConfig(v))throw new Error("Cannot detect data type: "+v);h=new l(v,e)}y.setSource(h.sourceNode),g&&g()};return m=Object.create(i.prototype,{constructor:t,_events:{value:{}},play:{value:E},pause:{value:L},load:{value:O},seek:{value:_},stop:{value:A},fade:{value:k},destroy:{value:M},context:{value:e},currentTime:{get:function(){return h?h.currentTime:0},set:function(e){A(),E(0,e)}},data:{get:function(){return v},set:function(e){e&&S(e)}},duration:{get:function(){return h?h.duration:0}},effect:{value:y},ended:{get:function(){return!!h&&h.ended}},frequency:{get:function(){return h?h.frequency:0},set:function(e){h&&(h.frequency=e)}},gain:{value:w},id:{get:function(){return d},set:function(e){d=e}},isTouchLocked:{set:function(e){T=e,p&&(p.isTouchLocked=e),!e&&g&&g()}},loader:{get:function(){return p}},loop:{get:function(){return b},set:function(e){b=!!e,h&&h.hasOwnProperty("loop")&&(h.loop=b)}},paused:{get:function(){return!!h&&h.paused}},playing:{get:function(){return!!h&&h.playing}},playbackRate:{get:function(){return x},set:function(e){x=e,h&&(h.playbackRate=x)}},progress:{get:function(){return h?h.progress:0}},volume:{get:function(){return e?w.gain.value:h&&h.hasOwnProperty("volume")?h.volume:1},set:function(n){if(!isNaN(n)){var t=w.gain;if(e){var r=e.currentTime;t.cancelScheduledValues(r),t.value=n,t.setValueAtTime(n,r)}else t.value=n,h&&h.hasOwnProperty("volume")&&(h.volume=n)}}}}),Object.freeze(m)}var r=e(16),o=e(3),i=e(22),u=e(23),a=e(24),c=e(17),s=e(18),f=e(19),l=e(20);n.exports=t},{}],16:[function(e,n){"use strict";function t(e,n,t){var r=!1,o=t,i=!1,u=!1,a=0,c=1,s=!1,f=null,l=0,d={},v=function(){return!f&&n&&(f=n.createBufferSource(),f.buffer=e),f},p=function(e,t){if(!s){for(e=e?n.currentTime+e:0,t=t||0,t&&(a=0),a&&(t=a);t>d.duration;)t%=d.duration;v(),f.loop=i,f.onended=m,f.start(e,t),f.playbackRate.value=c,l=n.currentTime-t,r=!1,u=!1,a=0,s=!0}},g=function(){var e=n.currentTime-l;h(),a=e,s=!1,u=!0},h=function(){if(f){f.onended=null;try{f.disconnect(),f.stop(0)}catch(e){}f=null}u=!1,a=0,s=!1,l=0},m=function(){h(),r=!0,"function"==typeof o&&o(d)},y=function(){h(),e=null,n=null,o=null,f=null};return Object.defineProperties(d,{play:{value:p},pause:{value:g},stop:{value:h},destroy:{value:y},currentTime:{get:function(){if(a)return a;if(l){var e=n.currentTime-l;return e>d.duration&&(e%=d.duration),e}return 0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return r}},loop:{get:function(){return i},set:function(e){i=!!e}},paused:{get:function(){return u}},playbackRate:{get:function(){return c},set:function(e){c=e,f&&(f.playbackRate.value=c)}},playing:{get:function(){return s}},progress:{get:function(){return d.duration?d.currentTime/d.duration:0}},sourceNode:{get:function(){return v()}}}),Object.freeze(d)}n.exports=t},{}],17:[function(e,n){"use strict";function t(e,n,t){var r,o,i=!1,u=t,a=!1,c=!1,s=1,f=!1,l=null,d={},v=function(){return!l&&n&&(l=n.createMediaElementSource(e)),l},p=function(n){e.src=n,e.load(),i=!1,c=!1,f=!1},g=function(n,t){clearTimeout(r),e.playbackRate=s,t&&(e.currentTime=t),n?r=setTimeout(g,n):e.play(),i=!1,c=!1,f=!0,e.removeEventListener("ended",T),e.addEventListener("ended",T,!1),e.readyState<4&&(e.removeEventListener("canplaythrough",h),e.addEventListener("canplaythrough",h,!1),e.load(),e.play())},h=function(){e.removeEventListener("canplaythrough",h),f&&e.play()},m=function(){clearTimeout(r),e&&(e.pause(),f=!1,c=!0)},y=function(){if(clearTimeout(r),e){e.pause();try{e.currentTime=0,e.currentTime>0&&e.load()}catch(n){}f=!1,c=!1}},w=function(t,r){function i(n,t){o=setTimeout(function(){return e.volume=e.volume+.2*(n-e.volume),Math.abs(e.volume-n)>.05?i(n,t):void(e.volume=n)},1e3*t)}return e?n?d:(window.clearTimeout(o),i(t,r/10),d):d},T=function(){i=!0,c=!1,f=!1,a?(e.currentTime=0,e.currentTime>0&&e.load(),g()):"function"==typeof u&&u(d)},b=function(){e.removeEventListener("ended",T),e.removeEventListener("canplaythrough",h),y(),e=null,n=null,u=null,l=null};return Object.defineProperties(d,{play:{value:g},pause:{value:m},stop:{value:y},load:{value:p},fade:{value:w},destroy:{value:b},currentTime:{get:function(){return e?e.currentTime:0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return i}},loop:{get:function(){return a},set:function(e){a=!!e}},paused:{get:function(){return c}},playbackRate:{get:function(){return s},set:function(n){s=n,e&&(e.playbackRate=s)}},playing:{get:function(){return f}},progress:{get:function(){return e&&e.duration?e.currentTime/e.duration:0}},sourceNode:{get:function(){return v()}},volume:{get:function(){return e?e.volume:1},set:function(n){window.clearTimeout(o),e&&(e.volume=n)}}}),Object.freeze(d)}n.exports=t},{}],18:[function(e,n){"use strict";function t(e,n){var t=!1,r=!1,o=0,i=!1,u=null,a=0,c=function(){return!u&&n&&(u=n.createMediaStreamSource(e),navigator.mozGetUserMedia&&(window.mozHack=u)),u},s=function(e){e=e?n.currentTime+e:0,c(),u.start(e),a=n.currentTime-o,t=!1,i=!0,r=!1,o=0},f=function(){var e=n.currentTime-a;l(),o=e,i=!1,r=!0},l=function(){if(u){try{u.stop(0)}catch(e){}u=null}t=!0,r=!1,o=0,i=!1,a=0},d=function(){l(),n=null,u=null,e=null,window.mozHack=null},v={play:s,pause:f,stop:l,destroy:d,duration:0,progress:0};return Object.defineProperties(v,{currentTime:{get:function(){return o?o:a?n.currentTime-a:0}},ended:{get:function(){return t}},paused:{get:function(){return r}},playing:{get:function(){return i}},sourceNode:{get:function(){return c()}}}),Object.freeze(v)}n.exports=t},{}],19:[function(e,n){"use strict";function t(e,n){var t,r=!1,o=!1,i=0,u=!1,a=null,c=0,s=200,f=function(){return!a&&n&&(a=n.createOscillator(),a.type=e,a.frequency.value=s),a},l=function(e){e=e||0,e&&(e=n.currentTime+e),f(),a.start(e),c=i?n.currentTime-i:n.currentTime,r=!1,u=!0,o=!1,i=0},d=function(){var e=n.currentTime-c;this.stop(),i=e,u=!1,o=!0},v=function(){if(a){try{a.stop(0)}catch(e){}a=null}r=!0,o=!1,i=0,u=!1,c=0},p=function(){this.stop(),n=null,a=null};return t={play:l,pause:d,stop:v,destroy:p},Object.defineProperties(t,{currentTime:{get:function(){return i?i:c?n.currentTime-c:0}},duration:{value:0},ended:{get:function(){return r}},frequency:{get:function(){return s},set:function(e){s=e,a&&(a.frequency.value=e)}},paused:{get:function(){return o}},playing:{get:function(){return u}},progress:{value:0},sourceNode:{get:function(){return f()}}}),Object.freeze(t)}n.exports=t},{}],20:[function(e,n){"use strict";function t(e,n){var t,r=e.bufferSize||1024,o=e.channels||1,i=!1,u=e.callback.bind(e.thisArg||this),a=!1,c=0,s=!1,f=null,l=0,d=function(){return!f&&n&&(f=n.createScriptProcessor(r,0,o)),f},v=function(e){e=e?n.currentTime+e:0,d(),f.onaudioprocess=u,l=n.currentTime-c,i=!1,a=!1,c=0,s=!0},p=function(){var e=n.currentTime-l;this.stop(),c=e,s=!1,a=!0},g=function(){f&&(f.onaudioprocess=h),i=!0,a=!1,c=0,s=!1,l=0},h=function(e){for(var n=e.outputBuffer,t=0,r=n.numberOfChannels;r>t;t++)for(var o=n.getChannelData(t),i=0,u=o.length;u>i;i++)o[i]=0},m=function(){this.stop(),n=null,u=null,f=null};return t={play:v,pause:p,stop:g,destroy:m,duration:0,progress:0},Object.defineProperties(t,{currentTime:{get:function(){return c?c:l?n.currentTime-l:0}},ended:{get:function(){return i}},paused:{get:function(){return a}},playing:{get:function(){return s}},sourceNode:{get:function(){return d()}}}),Object.freeze(t)}n.exports=t},{}],21:[function(e,n){"use strict";var t={};t.handlePageVisibility=function(e,n){function t(){document[r]?e():n()}var r,o;"undefined"!=typeof document.hidden?(r="hidden",o="visibilitychange"):"undefined"!=typeof document.mozHidden?(r="mozHidden",o="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r="webkitHidden",o="webkitvisibilitychange"),void 0!==o&&document.addEventListener(o,t,!1)},t.handleTouchLock=function(e,n){var t=navigator.userAgent,r=!!t.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i),o=function(){if(document.body.removeEventListener("touchstart",o),e){var t=e.createBuffer(1,1,22050),r=e.createBufferSource();r.buffer=t,r.connect(e.destination),r.start(0),r.disconnect()}n()};return r&&document.body.addEventListener("touchstart",o,!1),r},n.exports=t},{}],22:[function(e,n){"use strict";function t(){r.call(this)}var r=e(2).EventEmitter;t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.prototype.off=function(e,n){return n?this.removeListener(e,n):this.removeAllListeners(e)},n.exports=t},{}],23:[function(e,n){"use strict";var t={extensions:[],canPlay:{}},r=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],o=document.createElement("audio");o&&(r.forEach(function(e){var n=!!o.canPlayType(e.type);n&&t.extensions.push(e.ext),t.canPlay[e.ext]=n}),o=null),t.getFileExtension=function(e){if("data:"===e.slice(0,5)){var n=e.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(n&&n.length>1)return n[1].toLowerCase()}e=e.split("?")[0],e=e.slice(e.lastIndexOf("/")+1);var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop().toLowerCase()},t.getSupportedFile=function(e){var n;return Array.isArray(e)?e.some(function(e){n=e;var t=this.getFileExtension(e);return this.extensions.indexOf(t)>-1},this):"object"==typeof e&&Object.keys(e).some(function(t){n=e[t];var r=this.getFileExtension(n);
return this.extensions.indexOf(r)>-1},this),n||e},t.isAudioBuffer=function(e){return!!(e&&window.AudioBuffer&&e instanceof window.AudioBuffer)},t.isMediaElement=function(e){return!!(e&&window.HTMLMediaElement&&e instanceof window.HTMLMediaElement)},t.isMediaStream=function(e){return!!(e&&"function"==typeof e.getAudioTracks&&e.getAudioTracks().length&&window.MediaStreamTrack&&e.getAudioTracks()[0]instanceof window.MediaStreamTrack)},t.isOscillatorType=function(e){return!(!e||"string"!=typeof e||"sine"!==e&&"square"!==e&&"sawtooth"!==e&&"triangle"!==e)},t.isScriptConfig=function(e){return!!(e&&"object"==typeof e&&e.bufferSize&&e.channels&&e.callback)},t.isURL=function(e){return!(!e||"string"!=typeof e||!(e.indexOf(".")>-1||"data:"===e.slice(0,5)))},t.containsURL=function(e){if(!e)return!1;var n=e.url||e;return this.isURL(n)||Array.isArray(n)&&this.isURL(n[0])},n.exports=t},{}],24:[function(e,n){"use strict";function t(e){var n,t,o,i,u,a=new r,c=0,s=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"],f=function(){n?d():g()},l=function(e){a.emit("progress",1),a.emit("loaded",e),a.emit("complete",e),y()},d=function(){o=new XMLHttpRequest,o.open("GET",e,!0),o.responseType="arraybuffer",o.addEventListener("progress",v),o.addEventListener("load",p),o.addEventListener("error",m),o.send()},v=function(e){e.lengthComputable&&(c=e.loaded/e.total,a.emit("progress",c))},p=function(){n.decodeAudioData(o.response,function(e){u=e,o=null,c=1,l(e)},function(e){a.emit("error",e)})},g=function(){u&&u.tagName||(u=document.createElement("audio")),t||(window.clearTimeout(i),i=window.setTimeout(h,2e3),u.addEventListener("canplaythrough",h,!1)),u.addEventListener("error",m,!1),u.preload="auto",u.src=e,u.load(),t&&l(u)},h=function(){window.clearTimeout(i),u&&(c=1,l(u))},m=function(n){window.clearTimeout(i);var t=n;u&&u.error&&(t="Media Error: "+s[u.error.code]+" "+e),o&&(t="XHR Error: code "+(o.statusText||o.status)+" "+e),a.emit("error",t),y()},y=function(){a.off("error"),a.off("progress"),a.off("complete"),a.off("loaded"),u&&"function"==typeof u.removeEventListener&&(u.removeEventListener("canplaythrough",h),u.removeEventListener("error",m)),o&&(o.removeEventListener("progress",v),o.removeEventListener("load",p),o.removeEventListener("error",m))},w=function(){y(),o&&4!==o.readyState&&o.abort(),o=null,window.clearTimeout(i)},T=function(){w(),o=null,u=null,n=null},b=function(n){e=n,f()},x={on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),load:b,start:f,cancel:w,destroy:T};return Object.defineProperties(x,{data:{get:function(){return u}},progress:{get:function(){return c}},audioContext:{set:function(e){n=e}},isTouchLocked:{set:function(e){t=e}}}),Object.freeze(x)}var r=e(22);t.Group=function(){var e,n=new r,t=[],o=0,i=0,u=function(e){return t.push(e),i++,e},a=function(){i=t.length,c()},c=function(){return 0===t.length?(e=null,void n.emit("complete")):(e=t.pop(),e.on("progress",s),e.once("loaded",f),e.once("error",l),void e.start())},s=function(e){var t=o+e;n.emit("progress",t/i)},f=function(){o++,d(),n.emit("progress",o/i),c()},l=function(e){console.error.call(console,e),d(),n.emit("error",e),c()},d=function(){e.off("progress",s),e.off("loaded",f),e.off("error",l)};return Object.freeze({on:n.on.bind(n),once:n.once.bind(n),off:n.off.bind(n),add:u,start:a})},n.exports=t},{}],25:[function(e,n){"use strict";function t(e,n,t){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t=t||function(){};var r=!!navigator.getUserMedia,o=null,i={},u=function(){return r?(navigator.getUserMedia({audio:!0},function(n){n=n,e(n)},function(e){n&&"PermissionDeniedError"===e.name||"PERMISSION_DENIED"===e?n():t(e.message||e)}),i):void 0},a=function(){return o&&(o.stop(),o=null),i};return Object.defineProperties(i,{connect:{value:u},disconnect:{value:a},isSupported:{value:r},stream:{get:function(){return o}}}),Object.freeze(i)}n.exports=t},{}],26:[function(e,n){"use strict";function t(e,n){var t,o=new r(e,n),i=o.sounds,u=1,a=!1,c=function(){i.length&&(i.sort(function(e,n){return n.duration-e.duration}),t=i[0])},s=o.add;o.add=function(e){return s(e),c(),o};var f=o.rmeove;return o.remove=function(e){return f(e),c(),o},Object.defineProperties(o,{currentTime:{get:function(){return t?t.currentTime:0},set:function(e){this.stop(),this.play(0,e)}},duration:{get:function(){return t?t.duration:0}},loop:{get:function(){return a},set:function(e){a=!!e,i.forEach(function(e){e.loop=a})}},paused:{get:function(){return!!t&&t.paused}},progress:{get:function(){return t?t.progress:0}},playbackRate:{get:function(){return u},set:function(e){u=e,i.forEach(function(e){e.playbackRate=u})}},playing:{get:function(){return!!t&&t.playing}}}),o}var r=e(14);n.exports=t},{}],27:[function(e,n){"use strict";var t=e(25),r=e(28),o={};o.setContext=function(e){this._context=e},o.cloneBuffer=function(e){if(!this._context)return e;for(var n=e.numberOfChannels,t=this._context.createBuffer(n,e.length,e.sampleRate),r=0;n>r;r++)t.getChannelData(r).set(e.getChannelData(r));return t},o.reverseBuffer=function(e){for(var n=e.numberOfChannels,t=0;n>t;t++)Array.prototype.reverse.call(e.getChannelData(t));return e},o.ramp=function(e,n,t,r){this._context&&(e.setValueAtTime(n,this._context.currentTime),e.linearRampToValueAtTime(t,this._context.currentTime+r))},o.getFrequency=function(e){if(!this._context)return 0;var n=40,t=this._context.sampleRate/2,r=Math.log(t/n)/Math.LN2,o=Math.pow(2,r*(e-1));return t*o},o.microphone=function(e,n,r){return new t(e,n,r)},o.timeCode=function(e,n){void 0===n&&(n=":");var t=Math.floor(e/3600),r=Math.floor(e%3600/60),o=Math.floor(e%3600%60),i=0===t?"":10>t?"0"+t+n:t+n,u=(10>r?"0"+r:r)+n,a=10>o?"0"+o:o;return i+u+a},o.waveform=function(e,n){return new r(e,n)},n.exports=o},{}],28:[function(e,n){"use strict";function t(){var e,n,t=function(t,r){if(!window.Float32Array||!window.AudioBuffer)return[];var o=t===e,i=n&&n.length===r;if(o&&i)return n;var u=new Float32Array(r),a=Math.floor(t.length/r),c=5,s=Math.floor(a/c),f=0;1>s&&(s=1);for(var l=0,d=t.numberOfChannels;d>l;l++)for(var v=t.getChannelData(l),p=0;r>p;p++)for(var g=p*a,h=g+a;h>g;g+=s){var m=v[g];0>m&&(m=-m),m>u[p]&&(u[p]=m),m>f&&(f=m)}var y=1/f,w=u.length;for(l=0;w>l;l++)u[l]*=y;return e=t,n=u,u},r=function(n){var r,o,i=n.canvas||document.createElement("canvas"),u=n.width||i.width,a=n.height||i.height,c=n.color||"#333333",s=n.bgColor||"#dddddd",f=n.sound?n.sound.data:n.buffer||e,l=t(f,u),d=i.getContext("2d");d.strokeStyle=c,d.fillStyle=s,d.fillRect(0,0,u,a),d.beginPath();for(var v=0;v<l.length;v++)r=v+.5,o=a-Math.round(a*l[v]),d.moveTo(r,o),d.lineTo(r,a);return d.stroke(),i};return Object.freeze({compute:t,draw:r})}n.exports=t},{}]},{},[1])(1)});